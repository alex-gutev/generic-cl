<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.9">
<meta name="author" content="Alexander Gutev">
<title>GENERIC-CL</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>GENERIC-CL</h1>
<div class="details">
<span id="author" class="author">Alexander Gutev</span><br>
<span id="email" class="email">&lt;<a href="mailto:alex.gutev@gmail.com">alex.gutev@gmail.com</a>&gt;</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#usage">Usage</a>
<ul class="sectlevel2">
<li><a href="#using_specific_interface">Using Specific Interface</a></li>
</ul>
</li>
<li><a href="#comparison">Comparison</a>
<ul class="sectlevel2">
<li><a href="#equalp">EQUALP</a></li>
<li><a href="#likep">LIKEP</a></li>
<li><a href="#equalp-nary">=</a></li>
<li><a href="#not-equalp-nary">/=</a></li>
<li><a href="#lessp">LESSP</a></li>
<li><a href="#less_equal_p">LESS-EQUAL-P</a></li>
<li><a href="#greaterp">GREATERP</a></li>
<li><a href="#greater_equal_p">GREATER-EQUAL-P</a></li>
<li><a href="#compare">COMPARE</a></li>
<li><a href="#lessp-nary">&lt;</a></li>
<li><a href="#less-equal-p-nary">&lt;=</a></li>
<li><a href="#greaterp-nary">&gt;</a></li>
<li><a href="#greater-equal-p-nary">&gt;=</a></li>
<li><a href="#min">MIN</a></li>
<li><a href="#max">MAX</a></li>
</ul>
</li>
<li><a href="#arithmetic">Arithmetic</a>
<ul class="sectlevel2">
<li><a href="#add">ADD</a></li>
<li><a href="#subtract">SUBTRACT</a></li>
<li><a href="#multiply">MULTIPLY</a></li>
<li><a href="#divide">DIVIDE</a></li>
<li><a href="#negate">NEGATE</a></li>
<li><a href="#add-nary">+</a></li>
<li><a href="#subtract-nary">-</a></li>
<li><a href="#multiply-nary">*</a></li>
<li><a href="#divide-nary">/</a></li>
<li><a href="#1">1+</a></li>
<li><a href="#1_2">1-</a></li>
<li><a href="#incf">INCF</a></li>
<li><a href="#decf">DECF</a></li>
<li><a href="#minusp">MINUSP</a></li>
<li><a href="#plusp">PLUSP</a></li>
<li><a href="#zerop">ZEROP</a></li>
<li><a href="#signum">SIGNUM</a></li>
<li><a href="#abs">ABS</a></li>
<li><a href="#evenp">EVENP</a></li>
<li><a href="#oddp">ODDP</a></li>
<li><a href="#floor">FLOOR</a></li>
<li><a href="#ceiling">CEILING</a></li>
<li><a href="#truncate">TRUNCATE</a></li>
<li><a href="#round">ROUND</a></li>
<li><a href="#mod">MOD</a></li>
<li><a href="#rem">REM</a></li>
</ul>
</li>
<li><a href="#object">Object</a>
<ul class="sectlevel2">
<li><a href="#copy">COPY</a></li>
<li><a href="#coerce">COERCE</a></li>
<li><a href="#defconstant">DEFCONSTANT</a></li>
</ul>
</li>
<li><a href="#container">Container</a>
<ul class="sectlevel2">
<li><a href="#creation">Creation</a>
<ul class="sectlevel3">
<li><a href="#cleared">CLEARED</a></li>
<li><a href="#make_sequence_of_type">MAKE-SEQUENCE-OF-TYPE</a></li>
<li><a href="#sequence_of_type">SEQUENCE-OF-TYPE</a></li>
</ul>
</li>
<li><a href="#elements">Elements</a>
<ul class="sectlevel3">
<li><a href="#elt">ELT</a></li>
<li><a href="#setf-elt">(SETF ELT)</a></li>
<li><a href="#first">FIRST</a></li>
<li><a href="#last">LAST</a></li>
<li><a href="#lastcdr">LASTCDR</a></li>
<li><a href="#erase">ERASE</a></li>
</ul>
</li>
<li><a href="#container_size">Container Size</a>
<ul class="sectlevel3">
<li><a href="#length">LENGTH</a></li>
<li><a href="#emptyp">EMPTYP</a></li>
<li><a href="#clear">CLEAR</a></li>
<li><a href="#adjust_size">ADJUST-SIZE</a></li>
<li><a href="#nadjust_size">NADJUST-SIZE</a></li>
</ul>
</li>
<li><a href="#subsequences">Subsequences</a>
<ul class="sectlevel3">
<li><a href="#subseq">SUBSEQ</a></li>
<li><a href="#setf_subseq">(SETF SUBSEQ)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#iterator">Iterator</a>
<ul class="sectlevel2">
<li><a href="#iterator-struct">Base Iterator Type</a></li>
<li><a href="#iterator_creation">Iterator Creation</a>
<ul class="sectlevel3">
<li><a href="#make_iterator">MAKE-ITERATOR</a></li>
<li><a href="#make_reverse_iterator">MAKE-REVERSE-ITERATOR</a></li>
<li><a href="#iterator-func">ITERATOR</a></li>
</ul>
</li>
<li><a href="#mandatory_functions">Mandatory Functions</a>
<ul class="sectlevel3">
<li><a href="#at">AT</a></li>
<li><a href="#endp">ENDP</a></li>
<li><a href="#advance">ADVANCE</a></li>
</ul>
</li>
<li><a href="#optional_functions">Optional Functions</a>
<ul class="sectlevel3">
<li><a href="#start">START</a></li>
<li><a href="#setf-at">(SETF AT)</a></li>
<li><a href="#advance_n">ADVANCE-N</a></li>
</ul>
</li>
<li><a href="#macros">Macros</a>
<ul class="sectlevel3">
<li><a href="#doseq">DOSEQ</a></li>
<li><a href="#do_sequences">DO-SEQUENCES</a></li>
<li><a href="#doseq_2">DOSEQ!</a></li>
<li><a href="#do_sequences_2">DO-SEQUENCES!</a></li>
</ul>
</li>
<li><a href="#low-level-iter-macros">Low-Level Macros</a>
<ul class="sectlevel3">
<li><a href="#with_iterators">WITH-ITERATORS</a></li>
<li><a href="#with_iter_value">WITH-ITER-VALUE</a></li>
<li><a href="#with_iter_values">WITH-ITER-VALUES</a></li>
<li><a href="#with_iter_place">WITH-ITER-PLACE</a></li>
<li><a href="#with_iter_places">WITH-ITER-PLACES</a></li>
<li><a href="#do_iter_values">DO-ITER-VALUES</a></li>
<li><a href="#do_iter_places">DO-ITER-PLACES</a></li>
<li><a href="#doiters">DOITERS</a></li>
<li><a href="#doiter">DOITER</a></li>
</ul>
</li>
<li><a href="#implemented_interfaces">Implemented Interfaces</a>
<ul class="sectlevel3">
<li><a href="#iterator-length">LENGTH</a></li>
<li><a href="#iterator-subseq">SUBSEQ</a></li>
</ul>
</li>
<li><a href="#optimization">Optimization</a>
<ul class="sectlevel3">
<li><a href="#make_doseq">MAKE-DOSEQ</a></li>
<li><a href="#iter_macro">ITER-MACRO</a></li>
<li><a href="#with_destructure_pattern">WITH-DESTRUCTURE-PATTERN</a></li>
<li><a href="#with_variable_declarations">WITH-VARIABLE-DECLARATIONS</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#collector">Collector</a>
<ul class="sectlevel2">
<li><a href="#make_collector">MAKE-COLLECTOR</a></li>
<li><a href="#accumulate">ACCUMULATE</a></li>
<li><a href="#collector_sequence">COLLECTOR-SEQUENCE</a></li>
<li><a href="#extend">EXTEND</a></li>
</ul>
</li>
<li><a href="#sequence">Sequence</a>
<ul class="sectlevel2">
<li><a href="#find_it">FIND-IT</a></li>
<li><a href="#find_it_if">FIND-IT-IF</a></li>
<li><a href="#find_it_if_not">FIND-IT-IF-NOT</a></li>
<li><a href="#merge">MERGE</a></li>
<li><a href="#nmerge">NMERGE</a></li>
<li><a href="#sort">SORT</a></li>
<li><a href="#stable_sort">STABLE-SORT</a></li>
<li><a href="#nsort">NSORT</a></li>
<li><a href="#stable_nsort">STABLE-NSORT</a></li>
<li><a href="#concatenate">CONCATENATE</a></li>
<li><a href="#nconcatenate">NCONCATENATE</a></li>
<li><a href="#concatenate_to">CONCATENATE-TO</a></li>
<li><a href="#map">MAP</a></li>
<li><a href="#nmap">NMAP</a></li>
<li><a href="#map_into">MAP-INTO</a></li>
<li><a href="#map_to">MAP-TO</a></li>
<li><a href="#map_extend">MAP-EXTEND</a></li>
<li><a href="#map_extend_to">MAP-EXTEND-TO</a></li>
<li><a href="#map_extend_into">MAP-EXTEND-INTO</a></li>
<li><a href="#foreach">FOREACH</a></li>
<li><a href="#implemented_methods">Implemented Methods</a>
<ul class="sectlevel3">
<li><a href="#elt_2">ELT</a></li>
<li><a href="#setf_elt">(SETF ELT)</a></li>
<li><a href="#length_2">LENGTH</a></li>
<li><a href="#emptyp_2">EMPTYP</a></li>
<li><a href="#adjust_size_2">ADJUST-SIZE</a></li>
<li><a href="#nadjust_size_2">NADJUST-SIZE</a></li>
<li><a href="#subseq_2">SUBSEQ</a></li>
<li><a href="#setf_subseq_2">(SETF SUBSEQ)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#lazy_sequences">Lazy Sequences</a>
<ul class="sectlevel2">
<li><a href="#lazy_seq_structure">LAZY-SEQ Structure</a></li>
<li><a href="#make_lazy_seq">MAKE-LAZY-SEQ</a></li>
<li><a href="#lazy_seq_macro">LAZY-SEQ Macro</a></li>
<li><a href="#coerce_methods">COERCE Methods</a></li>
<li><a href="#concatenate_methods">CONCATENATE Methods</a></li>
<li><a href="#map_methods">MAP Methods</a></li>
<li><a href="#utilities">Utilities</a>
<ul class="sectlevel3">
<li><a href="#range">RANGE</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#generic_hash_tables">Generic Hash-Tables</a>
<ul class="sectlevel2">
<li><a href="#hash_map">HASH-MAP</a>
<ul class="sectlevel3">
<li><a href="#implemented_interfaces_2">Implemented Interfaces</a></li>
</ul>
</li>
<li><a href="#make_hash_map">MAKE-HASH-MAP</a></li>
<li><a href="#ensure_hash_map">ENSURE-HASH-MAP</a></li>
<li><a href="#hash_map_test">HASH-MAP-TEST</a></li>
<li><a href="#hash">HASH</a></li>
<li><a href="#like_hash">LIKE-HASH</a></li>
<li><a href="#get">GET</a></li>
<li><a href="#setf_get">(SETF GET)</a></li>
<li><a href="#ensure_get">ENSURE-GET</a></li>
<li><a href="#elt_methods">ELT Methods</a></li>
<li><a href="#setf_elt_methods">(SETF ELT) Methods</a></li>
<li><a href="#erase_method">ERASE Method</a></li>
<li><a href="#hash_map_alist">HASH-MAP-ALIST</a></li>
<li><a href="#alist_hash_map">ALIST-HASH-MAP</a></li>
<li><a href="#map_keys">MAP-KEYS</a></li>
<li><a href="#map_values">MAP-VALUES</a></li>
<li><a href="#coerce_methods_2">COERCE Methods</a></li>
<li><a href="#make_sequence_of_type_method">MAKE-SEQUENCE-OF-TYPE Method</a></li>
</ul>
</li>
<li><a href="#sets">Sets</a>
<ul class="sectlevel2">
<li><a href="#adjoin">ADJOIN</a></li>
<li><a href="#nadjoin">NADJOIN</a></li>
<li><a href="#memberp">MEMBERP</a></li>
<li><a href="#hash_set">HASH-SET</a></li>
<li><a href="#hash_table_set">HASH-TABLE-SET</a></li>
<li><a href="#hash_set_2">HASH-SET</a></li>
<li><a href="#make_hash_set">MAKE-HASH-SET</a></li>
<li><a href="#coerce_methods_3">COERCE Methods</a></li>
</ul>
</li>
<li><a href="#math">Math</a></li>
<li><a href="#system_generic_cl_util">System GENERIC-CL.UTIL</a>
<ul class="sectlevel2">
<li><a href="#lazy_sequence_utilities">Lazy Sequence Utilities</a>
<ul class="sectlevel3">
<li><a href="#repeat">REPEAT</a></li>
<li><a href="#repeatedly">REPEATEDLY</a></li>
<li><a href="#iterate">ITERATE</a></li>
<li><a href="#fiterate">FITERATE</a></li>
<li><a href="#cycle">CYCLE</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#gf-optimization">Optimization</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>Source Repository: <a href="https://github.com/alex-gutev/generic-cl" class="bare">https://github.com/alex-gutev/generic-cl</a></strong></p>
</div>
<div class="paragraph">
<p>GENERIC-CL provides a generic function wrapper over various functions
in the Common Lisp standard, such as equality predicates and sequence
operations. The goal of this wrapper is to provide a standard
interface to common operations, such as testing for the equality of
two objects, which is extensible to user-defined classes and
structures.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usage">Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This library is divided into multiple systems each encapsulating a
specific generic interface. The simplest way to use this library is to
load the system <code>GENERIC-CL</code>, which loads all the interface
subsystems, and use the <code>GENERIC-CL</code> package which exports all symbols
in the <code>COMMON-LISP</code> package along with all the generic interface
functions. This package should be used instead of <code>COMMON-LISP</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>GENERIC-CL-USER</code> exports all symbols in the <code>CL-USER</code> and
<code>GENERIC-CL</code> packages. This package is intended to be used only at the
REPL.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="using_specific_interface">Using Specific Interface</h3>
<div class="paragraph">
<p>If you don&#8217;t want to load all the generic interfaces, but only require
a specific interface, such as the generic comparability interface,
then load only the system which contains that interface and import its
package.</p>
</div>
<div class="paragraph">
<p>The packages generally contain symbols which shadow those in the
<code>COMMON-LISP</code> package, thus they cannot simply be used alongside
<code>COMMON-LISP</code>. You&#8217;ll either have to manually import the shadowing
symbols, with <code>:SHADOWING-IMPORT-FROM</code> or use the <code>:MIX</code> option to
<a href="https://common-lisp.net/project/asdf/uiop.html#UIOP_002fPACKAGE">UIOP:DEFINE-PACKAGE</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>STATIC-DISPATCH-CL</code> package should be used instead of <code>CL</code>
in order to be able to optimize generic function calls. <em>See
<a href="https://github.com/alex-gutev/static-dispatch" class="bare">https://github.com/alex-gutev/static-dispatch</a> for more information.</em>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Using SHADOWING-IMPORT-FROM</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-c1">;; Using comparison interface GENERIC-CL.COMPARISON</span>

<span class="tok-p">(</span><span class="tok-nb">defpackage</span> <span class="tok-nv">my-pkg</span>
  <span class="tok-p">(</span><span class="tok-ss">:use</span> <span class="tok-ss">:static-dispatch-cl</span><span class="tok-p">)</span>
  <span class="tok-p">(</span><span class="tok-ss">:shadowing-import-from</span>
    <span class="tok-ss">:generic-cl.comparison</span>
    <span class="tok-ss">:equalp</span>
    <span class="tok-ss">:=</span>
    <span class="tok-ss">:/=</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example: Using UIOP:DEFINE-PACKAGE</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nv">uiop:define-package</span> <span class="tok-nv">my-pkg</span>
    <span class="tok-p">(</span><span class="tok-ss">:use</span><span class="tok-p">)</span> <span class="tok-c1">;; Necessary otherwise CL package is used</span>

  <span class="tok-c1">;; Packages listed earlier on shadow the packages listed after them</span>

  <span class="tok-p">(</span><span class="tok-ss">:mix</span> <span class="tok-ss">:generic-cl.comparison</span>
        <span class="tok-ss">:static-dispatch-cl</span><span class="tok-p">)</span>

  <span class="tok-o">...</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="comparison">Comparison</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name: <code>GENERIC-CL.COMPARISON</code>.</p>
</div>
<div class="paragraph">
<p>The comparison interface provides functions for comparing objects in
terms of <em>equality</em>, <em>greater than</em>, <em>less than</em>, <em>greater than or
equal to</em> and <em>less than or equal to</em> relations.</p>
</div>
<div class="paragraph">
<p><a href="#equalp">EQUALP</a> is the generic binary equality predicate function to
implement for user-defined types. <a href="#equalp-nary">=</a> and
<a href="#not-equalp-nary">/=</a> are the n-ary equality predicates similar to the
functions with the same names in the <code>COMMON-LISP</code> package.</p>
</div>
<div class="paragraph">
<p><a href="#lessp">LESSP</a>, <a href="#less_equal_p">LESS-EQUAL-P</a>, <a href="#greaterp">GREATERP</a>, <a href="#greater_equal_p">GREATER-EQUAL-P</a> are the
generic binary comparison functions to implement for user-defined
types. It is sufficient to just implement <code>LESSP</code> as the remaining
functions have default methods that are implemented in terms of
<code>LESSP</code>.</p>
</div>
<div class="paragraph">
<p><a href="#lessp-nary">&lt;</a>, <a href="#less-equal-p-nary">&lt;=</a>, <a href="#greaterp-nary">&gt;</a>,
<a href="#greater-equal-p-nary">&gt;=</a> are the n-ary comparison functions similar to
the functions with the same names in the <code>COMMON-LISP</code> package.</p>
</div>
<div class="sect2">
<h3 id="equalp">EQUALP</h3>
<div class="paragraph">
<p>Generic Function: <code>EQUALP A B</code></p>
</div>
<div class="paragraph">
<p>Returns true if object <code>A</code> is equal to object <code>B</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER NUMBER</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> and <code>B</code> represent the same numeric value, by
<code>CL:=</code>.</p>
</div>
</li>
<li>
<p><code>CHARACTER CHARACTER</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> and <code>B</code> represent the same character, by
<code>CL:CHAR=</code>.</p>
</div>
</li>
<li>
<p><code>CONS CONS</code></p>
<div class="paragraph">
<p>Returns true if the <code>CAR</code> of <code>A</code> is equal (by <code>EQUALP</code>) to the
<code>CAR</code> of <code>B</code> and if the <code>CDR</code> of <code>A</code> is equal (by <code>EQUALP</code>) to
the <code>CDR</code> of <code>B</code>.</p>
</div>
</li>
<li>
<p><code>VECTOR VECTOR</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> and <code>B</code> are vectors of the same length and
each element of <code>A</code> is equal (by <code>EQUALP</code>) to the corresponding
element of <code>B</code>.</p>
</div>
</li>
<li>
<p><code>ARRAY ARRAY</code></p>
<div class="paragraph">
<p>Multi-dimensional arrays.</p>
</div>
<div class="paragraph">
<p>Returns true if <code>A</code> and <code>B</code> have the same dimensions and each
element of <code>A</code> is equal (by <code>EQUALP</code>) to the corresponding
element of <code>B</code>.</p>
</div>
</li>
<li>
<p><code>STRING STRING</code></p>
<div class="paragraph">
<p>Returns true if both strings are equal, by <code>CL:STRING=</code>.</p>
</div>
</li>
<li>
<p><code>PATHNAME PATHNAME</code></p>
<div class="paragraph">
<p>Returns true if both <code>PATHNAME</code> objects are functionally equivalent,
by <code>UIOP:PATHNAME-EQUAL</code>.</p>
</div>
</li>
<li>
<p><code>T T</code></p>
<div class="paragraph">
<p>Default method.</p>
</div>
<div class="paragraph">
<p>Returns true if <code>A</code> and <code>B</code> are the same object, by <code>CL:EQ</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="likep">LIKEP</h3>
<div class="paragraph">
<p>Generic Function: <code>LIKEP A B</code></p>
</div>
<div class="paragraph">
<p>Returns true if <code>A</code> is similar to <code>B</code>, where similarity is defined as
the same as equality however ignoring differences in certain aspects
such as case in strings.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>CHARACTER CHARACTER</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> and <code>B</code> represent the same character ignoring
differences in case. Compared using <code>CL:CHAR-EQUAL</code>.</p>
</div>
</li>
<li>
<p><code>CONS CONS</code></p>
<div class="paragraph">
<p>Returns true if the <code>CAR</code> of <code>A</code> is similar (by <code>LIKEP</code>) to the
<code>CAR</code> of <code>B</code> and if the <code>CDR</code> of <code>A</code> is similar (by <code>LIKEP</code>) to
the <code>CDR</code> of <code>B</code>.</p>
</div>
</li>
<li>
<p><code>VECTOR VECTOR</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> and <code>B</code> are vectors of the same length and
each element of <code>A</code> is similar (by <code>LIKEP</code>) to the corresponding
element of <code>B</code>.</p>
</div>
</li>
<li>
<p><code>ARRAY ARRAY</code></p>
<div class="paragraph">
<p>Multi-dimensional arrays.</p>
</div>
<div class="paragraph">
<p>Returns true if <code>A</code> and <code>B</code> have the same dimensions and each
element of <code>A</code> is similar (by <code>LIKEP</code>) to the corresponding
element of <code>B</code>.</p>
</div>
</li>
<li>
<p><code>STRING STRING</code></p>
<div class="paragraph">
<p>Returns true if both strings are equal, ignoring differences in
case. Compared using <code>CL:STRING-EQUAL</code>.</p>
</div>
</li>
<li>
<p><code>T T</code></p>
<div class="paragraph">
<p>Default method.</p>
</div>
<div class="paragraph">
<p>Returns true if <code>(EQUALP A B)</code> returns true.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="equalp-nary">=</h3>
<div class="paragraph">
<p>Function: <code>= X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns true if all objects in <code>XS</code> are equal (by <code>EQUALP</code>) to <code>X</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="not-equalp-nary">/=</h3>
<div class="paragraph">
<p>Function: <code>= X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns true if at least one object in <code>XS</code> is not equal (by <code>EQUALP</code>)
to <code>X</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="lessp">LESSP</h3>
<div class="paragraph">
<p>Generic Function: <code>LESSP A B</code></p>
</div>
<div class="paragraph">
<p>Returns true if object <code>A</code> is less than object <code>B</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is sufficient to just implement this function, for
user-defined types, as the rest of the comparison functions have
default (<code>T T</code>) methods which are implemented in terms of <code>LESSP</code>.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER NUMBER</code></p>
<div class="paragraph">
<p>Returns true if the numeric value of <code>A</code> is less than the numeric
value of <code>B</code>, by <code>CL:&lt;</code>.</p>
</div>
</li>
<li>
<p><code>CHARACTER CHARACTER</code></p>
<div class="paragraph">
<p>Returns true if the character code of <code>A</code> is less than the
character code of <code>B</code>, by <code>CL:CHAR&lt;</code>.</p>
</div>
</li>
<li>
<p><code>STRING STRING</code></p>
<div class="paragraph">
<p>Returns true if the string <code>A</code> is lexicographically less than
<code>B</code>, by <code>CL:STRING&lt;</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="less_equal_p">LESS-EQUAL-P</h3>
<div class="paragraph">
<p>Generic Function: <code>LESS-EQUAL-P A B</code></p>
</div>
<div class="paragraph">
<p>Returns true if object <code>A</code> is less than or equal to object <code>B</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER NUMBER</code></p>
<div class="paragraph">
<p>Returns true if the numeric value of <code>A</code> is less than or equal to
the numeric value of <code>B</code>, by <code>CL:&lt;=</code>.</p>
</div>
</li>
<li>
<p><code>CHARACTER CHARACTER</code></p>
<div class="paragraph">
<p>Returns true if the character code of <code>A</code> is less than or equal
to the character code of <code>B</code>, by <code>CL:CHAR&lt;=</code>.</p>
</div>
</li>
<li>
<p><code>STRING STRING</code></p>
<div class="paragraph">
<p>Returns true if the string <code>A</code> is lexicographically less than or
equal to <code>B</code>, by <code>CL:STRING&lt;=</code>.</p>
</div>
</li>
<li>
<p><code>T T</code></p>
<div class="paragraph">
<p>Returns true if either <code>A</code> is less than <code>B</code> (by <a href="#lessp">LESSP</a>) or <code>A</code>
is equal to <code>B</code> (by <a href="#equalp">EQUALP</a>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">or</span> <span class="tok-p">(</span><span class="tok-nv">lessp</span> <span class="tok-nv">a</span> <span class="tok-nv">b</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">equalp</span> <span class="tok-nv">a</span> <span class="tok-nv">b</span><span class="tok-p">))</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="greaterp">GREATERP</h3>
<div class="paragraph">
<p>Generic Function: <code>GREATERP A B</code></p>
</div>
<div class="paragraph">
<p>Returns true if object <code>A</code> is greater than object <code>B</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER NUMBER</code></p>
<div class="paragraph">
<p>Returns true if the numeric value of <code>A</code> is greater than the
numeric value of <code>B</code>, by <code>CL:&gt;</code>.</p>
</div>
</li>
<li>
<p><code>CHARACTER CHARACTER</code></p>
<div class="paragraph">
<p>Returns true if the character code of <code>A</code> is greater than the
character code of <code>B</code>, by <code>CL:CHAR&gt;</code>.</p>
</div>
</li>
<li>
<p><code>STRING STRING</code></p>
<div class="paragraph">
<p>Returns true if the string <code>A</code> is lexicographically greater than
<code>B</code>, by <code>CL:STRING&gt;</code>.</p>
</div>
</li>
<li>
<p><code>T T</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> is not less than or equal to <code>B</code>, by <a href="#less_equal_p">LESS-EQUAL-P</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">not</span> <span class="tok-p">(</span><span class="tok-nv">less-equal-p</span> <span class="tok-nv">a</span> <span class="tok-nv">b</span><span class="tok-p">))</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="greater_equal_p">GREATER-EQUAL-P</h3>
<div class="paragraph">
<p>Generic Function: <code>GREATER-EQUAL-P A B</code></p>
</div>
<div class="paragraph">
<p>Returns true if object <code>A</code> is greater than or equal to object <code>B</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER NUMBER</code></p>
<div class="paragraph">
<p>Returns true if the numeric value of <code>A</code> is greater than or equal
to the numeric value of <code>B</code>, by <code>CL:&gt;=</code>.</p>
</div>
</li>
<li>
<p><code>CHARACTER CHARACTER</code></p>
<div class="paragraph">
<p>Returns true if the character code of <code>A</code> is greater than or
equal to the character code of <code>B</code>, by <code>CL:CHAR&gt;=</code>.</p>
</div>
</li>
<li>
<p><code>STRING STRING</code></p>
<div class="paragraph">
<p>Returns true if the string <code>A</code> is lexicographically greater than
or equal to <code>B</code>, by <code>CL:STRING&gt;=</code>.</p>
</div>
</li>
<li>
<p><code>T T</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> is not less than <code>B</code>, by <a href="#lessp">LESSP</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">not</span> <span class="tok-p">(</span><span class="tok-nv">lessp</span> <span class="tok-nv">a</span> <span class="tok-nv">b</span><span class="tok-p">))</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="compare">COMPARE</h3>
<div class="paragraph">
<p>Generic Function: <code>COMPARE A B</code></p>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>:LESS</code></dt>
<dd>
<p>if <code>A</code> is less than <code>B</code>.</p>
</dd>
<dt class="hdlist1"><code>:EQUAL</code></dt>
<dd>
<p>if <code>A</code> is equal to <code>B</code>.</p>
</dd>
<dt class="hdlist1"><code>:GREATER</code></dt>
<dd>
<p>if <code>A</code> is greater than <code>B</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The default <code>T T</code> method returns:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>:LESS</code></dt>
<dd>
<p>if <code>(LESSP A B)</code> is true.</p>
</dd>
<dt class="hdlist1"><code>:EQUAL</code></dt>
<dd>
<p>if <code>(EQUALP A B)</code> is true.</p>
</dd>
<dt class="hdlist1"><code>:GREATER</code></dt>
<dd>
<p>otherwise.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="lessp-nary">&lt;</h3>
<div class="paragraph">
<p>Function: <code>&lt; X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns true if each argument is less than the following argument, by
<a href="#lessp">LESSP</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="less-equal-p-nary">&lt;=</h3>
<div class="paragraph">
<p>Function: <code>&lt;= X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns true if each argument is less than or equal to the following
argument, by <a href="#less_equal_p">LESS-EQUAL-P</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="greaterp-nary">&gt;</h3>
<div class="paragraph">
<p>Function: <code>&gt; X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns true if each argument is greater than the following argument,
by <a href="#greaterp">GREATERP</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="greater-equal-p-nary">&gt;=</h3>
<div class="paragraph">
<p>Function: <code>&gt;= X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns true if each argument is greater than or equal to the
following argument, by <a href="#greater_equal_p">GREATER-EQUAL-P</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="min">MIN</h3>
<div class="paragraph">
<p>Function: <code>MIN X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns the minimum argument.</p>
</div>
<div class="paragraph">
<p>The comparisons are performed by <a href="#lessp">LESSP</a>. Any one of the arguments which
is less than or equal to the other arguments may be returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="max">MAX</h3>
<div class="paragraph">
<p>Function: <code>MAX X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns the maximum argument.</p>
</div>
<div class="paragraph">
<p>The comparisons are performed by <a href="#greaterp">GREATERP</a>. Any one of the arguments
which is greater than or equal to the other arguments may be returned.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="arithmetic">Arithmetic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name: <code>GENERIC-CL.ARITHMETIC</code>.</p>
</div>
<div class="paragraph">
<p>The arithmetic interface provides generic functions for arithmetic
operations.</p>
</div>
<div class="paragraph">
<p><a href="#add">ADD</a>, <a href="#subtract">SUBTRACT</a>, <a href="#multiply">MULTIPLY</a>, <a href="#divide">DIVIDE</a> are the generic binary
arithmetic functions, and <a href="#negate">NEGATE</a> is the generic unary negation
function, to implement for user-defined types.</p>
</div>
<div class="paragraph">
<p><a href="#add-nary">+</a>, <a href="#subtract-nary">-</a>, <a href="#multiply-nary">*</a>, <a href="#divide-nary">/</a>
are the n-ary arithmetic functions similar to the functions with the
same names in the <code>COMMON-LISP</code> package.</p>
</div>
<div class="sect2">
<h3 id="add">ADD</h3>
<div class="paragraph">
<p>Generic Function: <code>ADD A B</code></p>
</div>
<div class="paragraph">
<p>Returns the sum of <code>A</code> and <code>B</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:+ A B)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="subtract">SUBTRACT</h3>
<div class="paragraph">
<p>Generic Function: <code>SUBTRACT A B</code></p>
</div>
<div class="paragraph">
<p>Returns the difference of <code>A</code> and <code>B</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:- A B)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="multiply">MULTIPLY</h3>
<div class="paragraph">
<p>Generic Function: <code>MULTIPLY A B</code></p>
</div>
<div class="paragraph">
<p>Returns the product of <code>A</code> and <code>B</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:* A B)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="divide">DIVIDE</h3>
<div class="paragraph">
<p>Generic Function: <code>DIVIDE A B</code></p>
</div>
<div class="paragraph">
<p>Returns the quotient of <code>A</code> and <code>B</code>. If <code>A</code> is the constant <code>1</code>, the
result should be the reciprocal of <code>B</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:/ A B)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="negate">NEGATE</h3>
<div class="paragraph">
<p>Generic Function: <code>NEGATE A</code></p>
</div>
<div class="paragraph">
<p>Returns the negation of <code>A</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:- A)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="add-nary">+</h3>
<div class="paragraph">
<p>Function: <code>+ X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns the sum of all the arguments, computed by reducing over the
argument list with the <a href="#add">ADD</a> function.</p>
</div>
<div class="paragraph">
<p>If no arguments are provided, <code>0</code> is returned. If a single argument is
provided it is returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="subtract-nary">-</h3>
<div class="paragraph">
<p>Function: <code>- X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns the difference of all the arguments, computed by reducing over
the argument list with the <a href="#subtract">SUBTRACT</a> function.</p>
</div>
<div class="paragraph">
<p>If only a single argument is provided the negation of that argument is
returned, by the <a href="#negate">NEGATE</a> function.</p>
</div>
</div>
<div class="sect2">
<h3 id="multiply-nary">*</h3>
<div class="paragraph">
<p>Function: <code>* X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns the product of all the arguments, computed by reducing over
the argument list with the <a href="#multiply">MULTIPLY</a> function.</p>
</div>
<div class="paragraph">
<p>If no arguments are provided, <code>1</code> is returned. If a single argument is
provided it is returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="divide-nary">/</h3>
<div class="paragraph">
<p>Function: <code>/ X &amp;REST XS</code></p>
</div>
<div class="paragraph">
<p>Returns the quotient of all the arguments, computed by reducing over
the argument list with the <a href="#divide">DIVIDE</a> function.</p>
</div>
<div class="paragraph">
<p>If only a single argument is provided, the reciprocal of the argument,
<code>(DIVIDE 1 X)</code>, is returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="1">1+</h3>
<div class="paragraph">
<p>Generic Function: <code>1+ A</code></p>
</div>
<div class="paragraph">
<p>Returns <code>A + 1</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:1+ A)</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns <code>(ADD A 1)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="1_2">1-</h3>
<div class="paragraph">
<p>Generic Function: <code>1- A</code></p>
</div>
<div class="paragraph">
<p>Returns <code>A - 1</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:1- A)</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns <code>(SUBTRACT A 1)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="incf">INCF</h3>
<div class="paragraph">
<p>Macro: <code>INCF PLACE &amp;OPTIONAL (DELTA 1)</code></p>
</div>
<div class="paragraph">
<p>Increments the value of <code>PLACE</code> by <code>DELTA</code>, which defaults to <code>1</code>,
using the <a href="#add">ADD</a> function.</p>
</div>
<div class="paragraph">
<p>Effectively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">setf</span> <span class="tok-nv">place</span> <span class="tok-p">(</span><span class="tok-nv">add</span> <span class="tok-nv">place</span> <span class="tok-nv">delta</span><span class="tok-p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="decf">DECF</h3>
<div class="paragraph">
<p>Macro: <code>DECF PLACE &amp;OPTIONAL (DELTA 1)</code></p>
</div>
<div class="paragraph">
<p>Decrements the value of <code>PLACE</code> by <code>DELTA</code>, which defaults to <code>1</code>,
using the <a href="#subtract">SUBTRACT</a> function.</p>
</div>
<div class="paragraph">
<p>Effectively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">setf</span> <span class="tok-nv">place</span> <span class="tok-p">(</span><span class="tok-nv">subtract</span> <span class="tok-nv">place</span> <span class="tok-nv">delta</span><span class="tok-p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="minusp">MINUSP</h3>
<div class="paragraph">
<p>Generic Function: <code>MINUSP A</code></p>
</div>
<div class="paragraph">
<p>Returns true if <code>A</code> is less than zero.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:MINUSP A)</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> compares less than <code>0</code>, by <a href="#lessp">LESSP</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nv">lessp</span> <span class="tok-nv">a</span> <span class="tok-mi">0</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="plusp">PLUSP</h3>
<div class="paragraph">
<p>Generic Function: <code>PLUSP A</code></p>
</div>
<div class="paragraph">
<p>Returns true if <code>A</code> is greater than zero.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:PLUSP A)</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> compares greater than <code>0</code>, by <a href="#greaterp">GREATERP</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nv">greaterp</span> <span class="tok-nv">a</span> <span class="tok-mi">0</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="zerop">ZEROP</h3>
<div class="paragraph">
<p>Generic Function: <code>ZEROP A</code></p>
</div>
<div class="paragraph">
<p>Returns true if <code>A</code> is equal to zero.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:ZEROP A)</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns true if <code>A</code> is equal to <code>0</code>, by <a href="#equalp">EQUALP</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">equalp</span> <span class="tok-nv">a</span> <span class="tok-mi">0</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="signum">SIGNUM</h3>
<div class="paragraph">
<p>Generic Function: <code>SIGNUM A</code></p>
</div>
<div class="paragraph">
<p>Returns <code>-1</code>, <code>0</code> or <code>1</code> depending on whether <code>A</code> is negative, is
equal to zero or is positive.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>SIGNUM</code></p>
<div class="paragraph">
<p>Returns <code>(CL:SIGNUM A)</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns <code>-1</code> if <code>(MINUSP A)</code> is true, <code>0</code> if <code>(ZEROP A)</code> is true,
<code>1</code> otherwise.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="abs">ABS</h3>
<div class="paragraph">
<p>Generic Function: <code>ABS A</code></p>
</div>
<div class="paragraph">
<p>Returns the absolute value of <code>A</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:ABS A)</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>If <code>(MINUSP A)</code> is true, returns <code>(NEGATE A)</code> otherwise returns
<code>A</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-nb">minusp</span> <span class="tok-nv">a</span><span class="tok-p">)</span>
    <span class="tok-p">(</span><span class="tok-nv">negate</span> <span class="tok-nv">a</span><span class="tok-p">)</span>
    <span class="tok-nv">a</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="evenp">EVENP</h3>
<div class="paragraph">
<p>Generic Function: <code>EVENP A</code></p>
</div>
<div class="paragraph">
<p>Returns true if <code>A</code> is even.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:EVENP A)</code></p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns <code>(ZEROP (MOD A 2))</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="oddp">ODDP</h3>
<div class="paragraph">
<p>Generic Function: <code>ODDP A</code></p>
</div>
<div class="paragraph">
<p>Returns true if <code>A</code> is odd.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:ODDP A)</code></p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns <code>(NOT (EVENP A))</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="floor">FLOOR</h3>
<div class="paragraph">
<p>Generic Function: <code>FLOOR N D</code></p>
</div>
<div class="paragraph">
<p>Performs the division <code>N/D</code> if <code>D</code> is provided, otherwise equivalent
to <code>N/1</code>, and returns the result rounded towards negative infinity as
the first value, and the remainder <code>N - result * D</code> as the second return
value.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:FLOOR N D)</code> if <code>D</code> is provided otherwise returns
<code>(CL:FLOOR N)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ceiling">CEILING</h3>
<div class="paragraph">
<p>Generic Function: <code>CEILING N D</code></p>
</div>
<div class="paragraph">
<p>Performs the division <code>N/D</code> if <code>D</code> is provided, otherwise equivalent
to <code>N/1</code>, and returns the result rounded towards positive infinity as
the first value, and the <code>N - result * D</code> as the second return value.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:CEILING N D)</code> if <code>D</code> is provided otherwise returns
<code>(CL:CEILING N)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="truncate">TRUNCATE</h3>
<div class="paragraph">
<p>Generic Function: <code>TRUNCATE N D</code></p>
</div>
<div class="paragraph">
<p>Performs the division <code>N/D</code> if <code>D</code> is provided, otherwise equivalent
to <code>N/1</code>, and returns the result rounded towards zero as the first
value, and the remainder <code>N - result * D</code> as the second return value.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:TRUNCATE N D)</code> if <code>D</code> is provided otherwise returns
<code>(CL:TRUNCATE N)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="round">ROUND</h3>
<div class="paragraph">
<p>Generic Function: <code>ROUND N D</code></p>
</div>
<div class="paragraph">
<p>Performs the division <code>N/D</code> if <code>D</code> is provided, otherwise equivalent
to <code>N/1</code>, and returns the result rounded towards the nearest integer
as the first value, and the remainder <code>N - result * D</code> as the second
return value.</p>
</div>
<div class="paragraph">
<p>If the result lies exactly halfway between two integers, it is rounded
to the nearest even integer.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:ROUND N D)</code> if <code>D</code> is provided otherwise returns
<code>(CL:ROUND N)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="mod">MOD</h3>
<div class="paragraph">
<p>Generic Function: <code>MOD N D</code></p>
</div>
<div class="paragraph">
<p>Returns the remainder of the <a href="#floor">FLOOR</a> operation on <code>N</code> and <code>D</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:MOD N D)</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns the second return value of <code>(FLOOR N D)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="rem">REM</h3>
<div class="paragraph">
<p>Generic Function: <code>REM N D</code></p>
</div>
<div class="paragraph">
<p>Returns the remainder of the <a href="#truncate">TRUNCATE</a> operation on <code>N</code> and <code>D</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>NUMBER</code></p>
<div class="paragraph">
<p>Returns <code>(CL:REM N D)</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Returns the second return value of <code>(TRUNCATE N D)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="object">Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name: <code>GENERIC-CL.OBJECT</code>.</p>
</div>
<div class="paragraph">
<p>The object interface provides miscellaneous functions for manipulating
objects, such as copying and type conversions.</p>
</div>
<div class="sect2">
<h3 id="copy">COPY</h3>
<div class="paragraph">
<p>Generic Function: <code>COPY OBJECT &amp;KEY &amp;ALLOW-OTHER-KEYS</code></p>
</div>
<div class="paragraph">
<p>Return a copy of <code>OBJECT</code>.</p>
</div>
<div class="paragraph">
<p>If <code>OBJECT</code> is mutable, by some other functions, then the returned
object should be distinct (not <code>EQ</code>) from <code>OBJECT</code>, otherwise the
return value may be identical (<code>EQ</code>) to <code>OBJECT</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This function may accept additional keyword arguments which
specify certain options as to how the object should be copied. Methods
specialized on containers accept a <code>:DEEP</code> keyword parameter, which if
provided and is true a deep copy is returned otherwise a shallow copy
is returned. If a user-defined type acts as a container or sequence
then the <code>COPY</code> method for that type should also accept the <code>:DEEP</code>
keyword argument.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>CONS</code></p>
<div class="paragraph">
<p>Returns a new list which contains all the elements in
<code>OBJECT</code>. If <code>:DEEP</code> is provided and is true, the list returned
contains a copy of the elements, copied using <code>(COPY ELEM :DEEP
     T)</code>.</p>
</div>
</li>
<li>
<p><code>VECTOR</code></p>
<div class="paragraph">
<p>Returns a new vector which contains all the elements in
<code>OBJECT</code>. If <code>:DEEP</code> is provided and is true, the vector returned
contains a copy of the elements, copied using <code>(COPY ELEM :DEEP
     T)</code>.</p>
</div>
</li>
<li>
<p><code>ARRAY</code></p>
<div class="paragraph">
<p>Multi-Dimensional Arrays.</p>
</div>
<div class="paragraph">
<p>Returns a new array, of the same dimensions as <code>OBJECT</code>, which
contains all the elements in <code>OBJECT</code>. If <code>:DEEP</code> is provided and
is true, the array returned contains a copy of the elements,
copied using <code>(COPY ELEM :DEEP T)</code>.</p>
</div>
</li>
<li>
<p><code>STRUCTURE-OBJECT</code></p>
<div class="paragraph">
<p>Returns a shallow copy of the structure object, using
<code>COPY-STRUCTURE</code>.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Simply returns <code>OBJECT</code>.</p>
</div>
<div class="paragraph">
<p>This method is provided to allow sequences containing arbitrary
objects to be copied safely, without signaling a condition, and
to avoid having to write simple pass-through methods for each
user-defined type.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If an object can be mutated, and there is no specialized copy
method for it, the constraints of the <code>COPY</code> function are violated.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="coerce">COERCE</h3>
<div class="paragraph">
<p>Generic Function: <code>COERCE OBJECT TYPE</code></p>
</div>
<div class="paragraph">
<p>Coerce <code>OBJECT</code> to the type <code>TYPE</code>.</p>
</div>
<div class="paragraph">
<p>The default (<code>T T</code>) method simply calls <code>CL:COERCE</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="defconstant">DEFCONSTANT</h3>
<div class="paragraph">
<p>Macro: <code>DEFCONSTANT SYMBOL VALUE &amp;OPTIONAL DOCUMENTATION</code></p>
</div>
<div class="paragraph">
<p>Ensure that <code>SYMBOL</code> is a constant with a value that is equal, by
<code>GENERIC-CL:EQUALP</code> to <code>VALUE</code>.</p>
</div>
<div class="paragraph">
<p>This means that if <code>SYMBOL</code> already names a constant, at the time of
evaluating the <code>DEFCONSTANT</code> form, no condition will be signalled if
its value is equal (by <code>GENERIC-CL:EQUALP</code>) to <code>VALUE</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Implemented using <code>ALEXANDRIA:DEFINE-CONSTANT</code>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="container">Container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name: <code>GENERIC-CL.CONTAINER</code>.</p>
</div>
<div class="paragraph">
<p>The container interface provides generic functions for retrieving
elements from containers, such as lists, arrays and hash-tables, and
for querying various properties of containers, such as the container&#8217;s
size.</p>
</div>
<div class="paragraph">
<p>All the following functions are applicable to both ordered containers,
<em>sequences</em>, and unordered containers, such as hash-maps, however some
only make sense when applied on sequences.</p>
</div>
<div class="sect2">
<h3 id="creation">Creation</h3>
<div class="paragraph">
<p>The following functions are for creating an empty container suitable
for accumulating items using the <a href="#collector">Collector</a> interface.</p>
</div>
<div class="sect3">
<h4 id="cleared">CLEARED</h4>
<div class="paragraph">
<p>Generic Function: <code>CLEARED CONTAINER &amp;KEY &amp;ALLOW-OTHER-KEYS</code></p>
</div>
<div class="paragraph">
<p>Return a new empty container of the same type, and with the same
properties, as <code>CONTAINER</code>, suitable for accumulating items into it
using the collector interface.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Individual methods may accept keyword parameters which specify
certain options of the container which is to be created.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>LIST</code></p>
<div class="paragraph">
<p>Returns <code>NIL</code>.</p>
</div>
</li>
<li>
<p><code>VECTOR</code></p>
<div class="paragraph">
<p>Returns an adjustable vector of the same length as <code>CONTAINER</code>,
with the fill-pointer set to <code>0</code>.</p>
</div>
<div class="paragraph">
<p>If the <code>:KEEP-ELEMENT-TYPE</code> argument is provided and is true, the
element type of the new vector is the same as the element type of
<code>CONTAINER</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="make_sequence_of_type">MAKE-SEQUENCE-OF-TYPE</h4>
<div class="paragraph">
<p>Generic Function: <code>MAKE-SEQUENCE-OF-TYPE TYPE ARGS</code></p>
</div>
<div class="paragraph">
<p>Return a new empty sequence / container of type <code>TYPE</code>.</p>
</div>
<div class="paragraph">
<p><code>ARGS</code> are the type arguments, if any.</p>
</div>
<div class="paragraph">
<p>The default method creates a built-in sequence of the same type as
that returned by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">make-sequence</span> <span class="tok-p">(</span><span class="tok-nb">cons</span> <span class="tok-k">type</span> <span class="tok-nv">args</span><span class="tok-p">)</span> <span class="tok-mi">0</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sequence_of_type">SEQUENCE-OF-TYPE</h4>
<div class="paragraph">
<p>Function: <code>SEQUENCE-OF-TYPE TYPE</code></p>
</div>
<div class="paragraph">
<p>Create a new sequence / container of type <code>TYPE</code>, using
<a href="#make_sequence_of_type">MAKE-SEQUENCE-OF-TYPE</a>.</p>
</div>
<div class="paragraph">
<p>If <code>TYPE</code> is a list the <code>CAR</code> of the list is passed as the first
argument, to <code>MAKE-SEQUENCE-OF-TYPE</code>, and the <code>CDR</code> is passed as the
second argument. Otherwise, if <code>TYPE</code> is not a list, it is passed as
the first argument and <code>NIL</code> is passed as the second argument.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="elements">Elements</h3>
<div class="sect3">
<h4 id="elt">ELT</h4>
<div class="paragraph">
<p>Generic Function: <code>ELT SEQUENCE INDEX</code></p>
</div>
<div class="paragraph">
<p>Return the element at position <code>INDEX</code> in the sequence <code>SEQUENCE</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>SEQUENCE T</code> and <code>VECTOR T</code></p>
<div class="paragraph">
<p>Returns <code>(CL:ELT SEQUENCE INDEX)</code>.</p>
</div>
</li>
<li>
<p><code>ARRAY INTEGER</code></p>
<div class="paragraph">
<p>Multi-Dimensional Arrays.</p>
</div>
<div class="paragraph">
<p>Returns <code>(ROW-MAJOR-AREF SEQUENCE INDEX)</code>.</p>
</div>
</li>
<li>
<p><code>ARRAY LIST</code></p>
<div class="paragraph">
<p>Multi-Dimensional Arrays.</p>
</div>
<div class="paragraph">
<p>If length of <code>INDEX</code> matches array&#8217;s rank, returns <code>(apply #'aref sequence
index)</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If <code>INDEX</code>'s length is less than the array&#8217;s rank, then returns a
displaced array whose dimensions are <code>SEQUENCE</code>'s <em>unused</em>
dimensions (ie <code>(nthcdr (array-dimensions sequence) (length index))</code>)
and which shares storage with the <em>subarray</em> of <code>SEQUENCE</code> specificied
by <code>INDEX</code>.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="setf-elt">(SETF ELT)</h4>
<div class="paragraph">
<p>Generic Function: <code>(SETF ELT) VALUE SEQUENCE INDEX</code></p>
</div>
<div class="paragraph">
<p>Set the value of the element at position <code>INDEX</code> in the sequence
<code>SEQUENCE</code>.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>T SEQUENCE T</code> and <code>T VECTOR T</code></p>
<div class="paragraph">
<p>Returns <code>(SETF (CL:ELT SEQUENCE INDEX) VALUE)</code>.</p>
</div>
</li>
<li>
<p><code>T ARRAY INTEGER</code></p>
<div class="paragraph">
<p>Multi-Dimensional Arrays.</p>
</div>
<div class="paragraph">
<p>Returns <code>(SETF (ROW-MAJOR-AREF SEQUENCE INDEX) VALUE)</code></p>
</div>
</li>
<li>
<p><code>ARRAY LIST</code></p>
<div class="paragraph">
<p>Multi-Dimensional Arrays.</p>
</div>
<div class="paragraph">
<p>If length of <code>INDEX</code> matches array&#8217;s rank, returns <code>(setf (apply #'aref sequence
index) value)</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If <code>INDEX</code>'s length is less than the array&#8217;s rank, then copies the
contents of <code>VALUE</code> to the <em>subarray</em> (see <a href="#elt">ELT</a>) specified by
<code>INDEX</code> and then returns <code>(elt sequence index)</code>. <code>VALUE</code>'s
dimensions must equal the <em>unused</em> dimensions of <code>SEQUENCE</code> (ie
<code>(nthcdr (array-dimensions sequence) (length index))</code>).</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="first">FIRST</h4>
<div class="paragraph">
<p>Generic Function: <code>FIRST SEQUENCE</code></p>
</div>
<div class="paragraph">
<p>Return the first element in the sequence <code>SEQUENCE</code>.</p>
</div>
<div class="paragraph">
<p>Implemented for lists, vectors and multi-dimensional arrays. For
multi-dimensional arrays, the first element is obtained by
<code>ROW-MAJOR-AREF</code>.</p>
</div>
<div class="paragraph">
<p>The default method is implemented using <a href="#elt">GENERIC-CL:ELT</a>, i.e. is
equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">elt</span> <span class="tok-nc">sequence</span> <span class="tok-mi">0</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="last">LAST</h4>
<div class="paragraph">
<p>Generic Function: <code>LAST SEQUENCE &amp;OPTIONAL (N 0)</code></p>
</div>
<div class="paragraph">
<p>Return the <code>N</code>'th element from the last element of the sequence
<code>SEQUENCE</code>.</p>
</div>
<div class="paragraph">
<p><code>N</code> defaults to <code>0</code> which indicates the last element. <code>1</code> indicates
the second to last element, <code>2</code> the third to last and so on.</p>
</div>
<div class="paragraph">
<p>Implemented for lists, vectors and multi-dimensional arrays. For
multi-dimensional arrays, the last element is obtained by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">row-major-aref</span> <span class="tok-nc">sequence</span> <span class="tok-p">(</span><span class="tok-nb">-</span> <span class="tok-p">(</span><span class="tok-nb">array-total-size</span> <span class="tok-nc">array</span><span class="tok-p">)</span> <span class="tok-mi">1</span> <span class="tok-nv">n</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The default method is implemented using <a href="#elt">GENERIC-CL:ELT</a>, i.e. is
equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">elt</span> <span class="tok-nc">sequence</span> <span class="tok-p">(</span><span class="tok-nb">-</span> <span class="tok-p">(</span><span class="tok-nb">length</span> <span class="tok-nc">sequence</span><span class="tok-p">)</span> <span class="tok-mi">1</span> <span class="tok-nv">n</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The behaviour of this function differs from <code>CL:LAST</code> when
called on lists, it returns the last element rather than the last
<code>CONS</code> cell. The <a href="#lastcdr">LASTCDR</a> function performs the same function as
<code>CL:LAST</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="lastcdr">LASTCDR</h4>
<div class="paragraph">
<p>Function: <code>LASTCDR LIST &amp;OPTIONAL (N 1)</code></p>
</div>
<div class="paragraph">
<p>Return the <code>CDR</code> of the <code>N</code>'th <code>CONS</code> cell from the end of the list.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is equivalent to the <code>CL:LAST</code> function.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="erase">ERASE</h4>
<div class="paragraph">
<p>Generic Function: <code>ERASE SEQUENCE INDEX</code></p>
</div>
<div class="paragraph">
<p>Remove the element at index <code>INDEX</code> from the sequence <code>SEQUENCE</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Destructively modifies <code>SEQUENCE</code>.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>VECTOR T</code></p>
<div class="paragraph">
<p>Shifts the elements following <code>INDEX</code> one element towards the
front of the vector and shrinks the vector by one element.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Signals a <code>TYPE-ERROR</code> if the vector is not adjustable.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This method is not implemented for lists as removing the first
element of a list cannot be implemented (efficiently) as a side effect
alone.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="container_size">Container Size</h3>
<div class="sect3">
<h4 id="length">LENGTH</h4>
<div class="paragraph">
<p>Generic Function: <code>LENGTH CONTAINER</code></p>
</div>
<div class="paragraph">
<p>Return the number of elements in the container <code>CONTAINER</code>.</p>
</div>
<div class="paragraph">
<p>If <code>CONTAINER</code> is an iterator, return the number of remaining elements
following the iterator&#8217;s position.</p>
</div>
<div class="paragraph">
<p>This function is implemented for all Common Lisp sequences, returning
the length of the sequence (by <code>CL:LENGTH</code>), and multi-dimensional
arrays, returning the total number of elements in the array by
<code>ARRAY-TOTAL-SIZE</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="emptyp">EMPTYP</h4>
<div class="paragraph">
<p>Generic Function: <code>EMPTYP CONTAINER</code></p>
</div>
<div class="paragraph">
<p>Return true if the container <code>CONTAINER</code> is empty.</p>
</div>
<div class="paragraph">
<p>Implemented for lists, vectors and multi-dimensional arrays (always
returns <code>NIL</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="clear">CLEAR</h4>
<div class="paragraph">
<p>Generic Function: <code>CLEAR CONTAINER</code></p>
</div>
<div class="paragraph">
<p>Destructively remove all elements from the container <code>CONTAINER</code>.</p>
</div>
<div class="paragraph">
<p>Implemented for vectors.</p>
</div>
</div>
<div class="sect3">
<h4 id="adjust_size">ADJUST-SIZE</h4>
<div class="paragraph">
<p>Generic Function: <code>ADJUST-SIZE CONTAINER N &amp;KEY ELEMENT</code></p>
</div>
<div class="paragraph">
<p>Return a new container with the same elements as <code>CONTAINER</code> however
with its size changed to <code>N</code>.</p>
</div>
<div class="paragraph">
<p>If <code>N</code> is less than the number of elements in <code>CONTAINER</code>, the
returned container contains only the first <code>N</code> elements of
<code>CONTAINER</code>.</p>
</div>
<div class="paragraph">
<p>If <code>N</code> is greater than the number of elements in <code>CONTAINER</code>, the
returned sequence contains all the elements of <code>CONTAINER</code> with an
additional <code>(LENGTH CONTAINER) - N</code> elements initialized to the value
of <code>ELEMENT</code>.</p>
</div>
<div class="paragraph">
<p>Methods are provided for lists and vectors. The default <code>T</code> method,
implements this operation using the <a href="#iterator">Iterator</a> and <a href="#collector">Collector</a>
interfaces.</p>
</div>
</div>
<div class="sect3">
<h4 id="nadjust_size">NADJUST-SIZE</h4>
<div class="paragraph">
<p>Generic Function: <code>NADJUST-SIZE CONTAINER N &amp;KEY ELEMENT</code></p>
</div>
<div class="paragraph">
<p>Return a new sequence containing the same elements as <code>CONTAINER</code>
however with its size changed to <code>N</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<code>CONTAINER</code> may be destructively modified.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If <code>N</code> is less than the number of elements in <code>CONTAINER</code>, the
returned container contains only the first <code>N</code> elements of
<code>CONTAINER</code>.</p>
</div>
<div class="paragraph">
<p>If <code>N</code> is greater than the number of elements in <code>CONTAINER</code>, the
returned sequence contains all the elements of <code>CONTAINER</code> with an
additional <code>(LENGTH CONTAINER) - N</code> elements initialized to the value
of <code>ELEMENT</code>.</p>
</div>
<div class="paragraph">
<p>Methods are provided for lists and vectors. The default <code>T</code> method,
implements this operation using the <a href="#iterator">Iterator</a> and <a href="#collector">Collector</a>
interfaces.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="subsequences">Subsequences</h3>
<div class="sect3">
<h4 id="subseq">SUBSEQ</h4>
<div class="paragraph">
<p>Generic Function: <code>SUBSEQ SEQUENCE START &amp;OPTIONAL END</code></p>
</div>
<div class="paragraph">
<p>Return a new sequence that contains the elements of <code>SEQUENCE</code> at the
positions in the range <code>[START, END)</code>.</p>
</div>
<div class="paragraph">
<p>If <code>SEQUENCE</code> is an iterator, an iterator for the sub-sequence
relative to the current position of the iterator is returned.</p>
</div>
<div class="paragraph">
<p><code>START</code> is the index of the first element of the subsequence, with <code>0</code>
indicating the start of the sequence. if <code>SEQUENCE</code> is an iterator,
<code>START</code> is the number of times the iterator should be <a href="#advance">ADVANCE</a>'d to
reach the first element of the subsequence.</p>
</div>
<div class="paragraph">
<p><code>END</code> is the index of the element following the last element of the
subsequence. <code>NIL</code> (the default) indicates the end of the sequence. If
<code>SEQUENCE</code> is an iterator, <code>END</code> is the number of times the iterator
should be <a href="#advance">ADVANCE</a>'d till the end position is reached.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>SEQUENCE T</code></p>
<div class="paragraph">
<p>Returns the subsequence using <code>CL:SUBSEQ</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="setf_subseq">(SETF SUBSEQ)</h4>
<div class="paragraph">
<p>Generic Function: <code>(SETF SUBSEQ) NEW-SEQUENCE SEQUENCE START &amp;OPTIONAL END</code></p>
</div>
<div class="paragraph">
<p>Replace the elements of <code>SEQUENCE</code> at the positions in the range
<code>[START, END)</code>, with the elements of <code>NEW-SEQUENCE</code>.</p>
</div>
<div class="paragraph">
<p>The shorter length of <code>NEW-SEQUENCE</code> and the number of elements
between <code>START</code> and <code>END</code> determines how many elements of <code>SEQUENCE</code>
are actually modified.</p>
</div>
<div class="paragraph">
<p>See <a href="#subseq">SUBSEQ</a> for more details of how the <code>START</code> and <code>END</code> arguments are
interpreted.</p>
</div>
<div class="ulist">
<div class="title">Methods</div>
<ul>
<li>
<p><code>SEQEUNCE SEQUENCE T</code></p>
<div class="paragraph">
<p>Sets the elements of the subsequence using <code>(SETF CL:SUBSEQ)</code>.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="iterator">Iterator</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name <code>GENERIC-CL.ITERATOR</code>.</p>
</div>
<div class="paragraph">
<p>The iterator interface is a generic interface for iterating over the
elements of sequences and containers.</p>
</div>
<div class="paragraph">
<p>Implemented for lists, vectors and multi-dimensional arrays.</p>
</div>
<div class="listingblock">
<div class="title">Basic Usage</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">loop</span>
   <span class="tok-nv">with</span> <span class="tok-nv">it</span> <span class="tok-nb">=</span> <span class="tok-p">(</span><span class="tok-nv">iterator</span> <span class="tok-nc">sequence</span><span class="tok-p">)</span> <span class="tok-c1">; Create iterator for SEQUENCE</span>
   <span class="tok-nv">until</span> <span class="tok-p">(</span><span class="tok-nb">endp</span> <span class="tok-nv">it</span><span class="tok-p">)</span>               <span class="tok-c1">; Loop until the iterator&#39;s end position is reached</span>
   <span class="tok-nb">do</span>
     <span class="tok-p">(</span><span class="tok-nv">something</span> <span class="tok-p">(</span><span class="tok-nv">at</span> <span class="tok-nv">it</span><span class="tok-p">))</span> <span class="tok-c1">; Do something with the current element</span>
     <span class="tok-p">(</span><span class="tok-nv">advance</span> <span class="tok-nv">it</span><span class="tok-p">))</span>       <span class="tok-c1">; Advance iterator to next element</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="iterator-struct">Base Iterator Type</h3>
<div class="paragraph">
<p>Structure: <code>ITERATOR</code></p>
</div>
<div class="paragraph">
<p>This structure serves as the base iterator type and is used by certain
methods of generic functions to specialize on iterators.</p>
</div>
<div class="paragraph">
<p>All iterators should inherit from (include) <code>ITERATOR</code>, in order for
methods which specialize on iterators to be invoked.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
A <a href="#copy">COPY</a> method should be implemented for user-defined
iterators.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="iterator_creation">Iterator Creation</h3>
<div class="paragraph">
<p><a href="#iterator-func">ITERATOR</a> is the high-level function for creating iterators,
whereas <a href="#make_iterator">MAKE-ITERATOR</a> AND <a href="#make_reverse_iterator">MAKE-REVERSE-ITERATOR</a> are the
generic iterator creation functions to implement for user-defined
sequence types.</p>
</div>
<div class="sect3">
<h4 id="make_iterator">MAKE-ITERATOR</h4>
<div class="paragraph">
<p>Generic Function: <code>MAKE-ITERATOR SEQUENCE START END</code></p>
</div>
<div class="paragraph">
<p>Return an iterator for the sub-sequence of <code>SEQUENCE</code>, identified by
the range <code>[START, END)</code>.</p>
</div>
<div class="paragraph">
<p><code>START</code> is the index of the first element to iterate over. <code>0</code>
indicates the first element of the sequence.</p>
</div>
<div class="paragraph">
<p><code>END</code> is the index of the element at which to terminate the iteration,
i.e.  1 + the index of the last element to be iterated over. <code>NIL</code>
indicates iterating till the end of the sequence.</p>
</div>
</div>
<div class="sect3">
<h4 id="make_reverse_iterator">MAKE-REVERSE-ITERATOR</h4>
<div class="paragraph">
<p>Generic Function: <code>MAKE-REVERSE-ITERATOR SEQUENCE START END</code></p>
</div>
<div class="paragraph">
<p>Return an iterator for the sub-sequence of <code>SEQUENCE</code>, identified by
the range <code>[START, END)</code>, in which the elements are iterated over in
reverse order.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Even though the elements are iterated over in reverse order,
<code>START</code> and <code>END</code> are still relative to the start of the sequence, as
in <code>MAKE-ITERATOR</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>START</code> is the index of the last element to visit.</p>
</div>
<div class="paragraph">
<p><code>END</code> is the index of the element following the first element to be
iterated over.</p>
</div>
</div>
<div class="sect3">
<h4 id="iterator-func">ITERATOR</h4>
<div class="paragraph">
<p>Function: <code>ITERATOR SEQUENCE &amp;KEY (START 0) END FROM-END</code></p>
</div>
<div class="paragraph">
<p>Return an iterator for the sub-sequence of <code>SEQUENCE</code> identified by
the range <code>[START, END)</code>.</p>
</div>
<div class="paragraph">
<p><code>START</code> (defaults to <code>0</code> - the start of the sequence) and <code>END</code>
(defaults to <code>NIL</code> - the end of the sequence) are the start and end
indices of the sub-sequence to iterate over (see <a href="#make_iterator">MAKE-ITERATOR</a> and
<a href="#make_reverse_iterator">MAKE-REVERSE-ITERATOR</a> for more a detailed description).</p>
</div>
<div class="paragraph">
<p>If <code>FROM-END</code> is true a reverse iterator is created (by
<a href="#make_reverse_iterator">MAKE-REVERSE-ITERATOR</a>) otherwise a forward iterator is created (by
<a href="#make_iterator">MAKE-ITERATOR</a>).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mandatory_functions">Mandatory Functions</h3>
<div class="paragraph">
<p>These functions must be implemented for all user-defined iterators.</p>
</div>
<div class="sect3">
<h4 id="at">AT</h4>
<div class="paragraph">
<p>Generic Function: <code>AT ITERATOR</code></p>
</div>
<div class="paragraph">
<p>Return the value of the element at the current position of the
iterator <code>ITERATOR</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The effects of calling this method, after the iterator has
reached the end of the subsequence are unspecified.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="endp">ENDP</h4>
<div class="paragraph">
<p>Generic Function: <code>ENDP ITERATOR</code></p>
</div>
<div class="paragraph">
<p>Return true if the iterator is at the end of the subsequence, false
otherwise.</p>
</div>
<div class="paragraph">
<p>The end of the subsequence is defined as the the position of the
iterator after advancing it (by <a href="#advance">ADVANCE</a>) from the position of the
last element.</p>
</div>
<div class="paragraph">
<p>If the subsequence is empty <code>ENDP</code> should immediately return true.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The default <code>T</code> method calls <code>CL:ENDP</code> since this function
shadows the <code>CL:ENDP</code> function.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="advance">ADVANCE</h4>
<div class="paragraph">
<p>Generic Function: <code>ADVANCE ITERATOR</code></p>
</div>
<div class="paragraph">
<p>Advance the position of the iterator to the next element in the
subsequence.</p>
</div>
<div class="paragraph">
<p>After this method is called, subsequent calls to <a href="#at">AT</a> should return
the next element in the sequence or if the last element has already
been iterated over, <a href="#endp">ENDP</a> should return true.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="optional_functions">Optional Functions</h3>
<div class="paragraph">
<p>Implementing the following functions for user-defined iterators is
optional either because a default method is provided, which is
implemented using the mandatory functions, or the function is only
used by a select few sequence operations.</p>
</div>
<div class="sect3">
<h4 id="start">START</h4>
<div class="paragraph">
<p>Generic Function: <code>START ITERATOR</code></p>
</div>
<div class="paragraph">
<p>Return the element at the current position of the iterator, if the
iterator is not at the end of the sequence. Otherwise return <code>NIL</code>.</p>
</div>
<div class="paragraph">
<p>The default method first checks whether the end of the iterator has
been reached, using <code>ENDP</code>, and if not returns the current element
using <code>AT</code>.</p>
</div>
<div class="paragraph">
<p>The default method is equivalent to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-nb">unless</span> <span class="tok-p">(</span><span class="tok-nb">endp</span> <span class="tok-nv">iterator</span><span class="tok-p">)</span>
  <span class="tok-p">(</span><span class="tok-nv">at</span> <span class="tok-nv">iterator</span><span class="tok-p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="setf-at">(SETF AT)</h4>
<div class="paragraph">
<p>Generic Function: <code>(SETF AT) VALUE ITERATOR</code></p>
</div>
<div class="paragraph">
<p>Set the value of the sequence element at the iterator&#8217;s current
position.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The effects of calling this function when, the iterator is
past the end of the subsequence are unspecified.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Implementing this function is only mandatory if destructive
sequence operations will be used.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="advance_n">ADVANCE-N</h4>
<div class="paragraph">
<p>Generic Function: <code>ADVANCE-N ITERATOR N</code></p>
</div>
<div class="paragraph">
<p>Advance the iterator by <code>N</code> elements.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The position of the iterator, after calling this function,
should be equivalent to the position obtained by calling <a href="#advance">ADVANCE</a>
<code>N</code> times.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The default method simply calls <a href="#advance">ADVANCE</a>, on <code>ITERATOR</code>, <code>N</code> times.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="macros">Macros</h3>
<div class="paragraph">
<p>Macros for iteratoring over a generic sequence. Analogous to
<code>CL:DOLIST</code>.</p>
</div>
<div class="sect3">
<h4 id="doseq">DOSEQ</h4>
<div class="paragraph">
<p>Macro: <code>DOSEQ (ELEMENT SEQUENCE &amp;REST ARGS) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Iterate over the elements of a sequence, evaluating a list of forms at
each iteration.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The iterator interface must be implemented for the
sequence, the elements of which, are being iterated over.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An optimized expansion, which does not use the iterator
interface, may be emitted if the type of sequence can be determined at
compile-time and there is a <a href="#make_doseq">MAKE-DOSEQ</a> method for that type.
</td>
</tr>
</table>
</div>
<div class="dlist">
<div class="title">Arguments</div>
<dl>
<dt class="hdlist1"><code>ELEMENT</code></dt>
<dd>
<p>Name of the variable which receives the value of the
current sequence element at each iteration. May also be a list in
which case it is interpreted as a destructuring pattern, as if to
<code>DESTRUCTURING-BIND</code>, according to which the element is destructured.</p>
</dd>
<dt class="hdlist1"><code>ARGS</code></dt>
<dd>
<p>Remaining arguments passed to the <a href="#iterator-func">ITERATOR</a>
function. The following keyword arguments are recognized <code>:START</code>,
<code>:END</code> and <code>:FROM-END</code>.</p>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>List of forms to evaluate at each iteration.</p>
<div class="paragraph">
<p>The forms are evaluated in an implicit <code>PROGN</code>, with the variables
introduced by <code>ELEMENT</code> visible to these forms. The loop may be
terminated early using <code>RETURN-FROM</code> to a <code>NIL</code> block, with the value
returned from the <code>DOSEQ</code> form.</p>
</div>
<div class="paragraph">
<p>The forms may be preceded by one or more declarations.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Returns <code>NIL</code> unless a <code>RETURN-FROM</code> to block <code>NIL</code> is executed in
<code>BODY</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="do_sequences">DO-SEQUENCES</h4>
<div class="paragraph">
<p>Macro: <code>DO-SEQUENCES (&amp;REST SEQUENCES) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Same as <a href="#doseq">DOSEQ</a> however for iterating over multiple sequences
simultaneously.</p>
</div>
<div class="dlist">
<div class="title">Arguments</div>
<dl>
<dt class="hdlist1"><code>SEQUENCES</code></dt>
<dd>
<p>The sequences over which to iterate and the names of the
variables which receive the values of their elements.</p>
<div class="paragraph">
<p>Each element is of the form <code>(ELEMENT SEQUENCE &amp;REST ARGS)</code>, which
corresponds to the <code>ELEMENT</code>, <code>SEQUENCE</code> and <code>ARGS</code> arguments of
<a href="#doseq">DOSEQ</a>.</p>
</div>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>List of forms to evaluate at each iteration, same as the body
argument to <a href="#doseq">DOSEQ</a></p>
<div class="paragraph">
<p>The forms may be preceded by one or more declarations.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="doseq_2">DOSEQ!</h4>
<div class="paragraph">
<p>Macro: <code>DOSEQ! (NAME SEQUENCE &amp;REST ARGS) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Same as <code>DOSEQ</code> however allows for the sequence elements to be
mutated.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The <a href="#setf-at">(SETF AT)</a> function must be implemented for the
sequence type.
</td>
</tr>
</table>
</div>
<div class="dlist">
<div class="title">Arguments</div>
<dl>
<dt class="hdlist1"><code>NAME</code></dt>
<dd>
<p>Name of the symbol-macro which expands to the <em>place</em> of the
current sequence elements.</p>
<div class="paragraph">
<p>The symbol-macro can be used to either reference the element&#8217;s value
or set the element&#8217;s value, using <code>SETF</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>ARGS</code></dt>
<dd>
<p>Remaining arguments passed to the <a href="#iterator-func">ITERATOR</a>
function. The following keyword arguments are recognized <code>:START</code>,
<code>:END</code> and <code>:FROM-END</code>.</p>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>List of forms to evaluate at each iteration.</p>
<div class="paragraph">
<p>The forms are evaluated in an implicit <code>PROGN</code>, with the symbol-macro
introduced by <code>NAME</code> visible to these forms. The loop may be
terminated early using <code>RETURN-FROM</code> to a <code>NIL</code> block, with the value
returned from the <code>DOSEQ</code> form.</p>
</div>
<div class="paragraph">
<p>The forms may be preceded by one or more declarations.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Returns <code>NIL</code> unless a <code>RETURN-FROM</code> to block <code>NIL</code> is executed in
<code>BODY</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="do_sequences_2">DO-SEQUENCES!</h4>
<div class="paragraph">
<p>Macro: <code>DO-SEQUENCES! (&amp;REST SEQUENCES) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Same as <a href="#doseq_2">DOSEQ!</a> however for iterating over multiple sequences
simultaneously.</p>
</div>
<div class="dlist">
<div class="title">Arguments</div>
<dl>
<dt class="hdlist1"><code>SEQUENCES</code></dt>
<dd>
<p>The sequences over which to iterate and the names of the
variables which receive the values of their elements.</p>
<div class="paragraph">
<p>Each element is of the form <code>(NAME SEQUENCE &amp;REST ARGS)</code>, which
corresponds to the <code>NAME</code>, <code>SEQUENCE</code> and <code>ARGS</code> arguments of
<a href="#doseq">DOSEQ</a>.</p>
</div>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>List of forms to evaluate at each iteration, same as the body
argument to <a href="#doseq">DOSEQ</a></p>
<div class="paragraph">
<p>The forms may be preceded by one or more declarations.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="low-level-iter-macros">Low-Level Macros</h3>
<div class="paragraph">
<p>These macros provide access to the iterator&#8217;s themselves, used to
implement the high-level iteration macros, allowing for greater
control over the iteration process.</p>
</div>
<div class="sect3">
<h4 id="with_iterators">WITH-ITERATORS</h4>
<div class="paragraph">
<p>Macro: <code>WITH-ITERATORS (&amp;REST SEQUENCES) &amp;BODY FORMS</code></p>
</div>
<div class="paragraph">
<p>Setup the iterator state for iterating over one or more sequences.</p>
</div>
<div class="paragraph">
<p><a href="#with_iter_value">WITH-ITER-VALUE</a> and <a href="#with_iter_place">WITH-ITER-PLACE</a>, can be used within this
macro to retrieve/set the element pointed to by the iterators and
advance their positions.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This macro attempts to determine the type of each sequence
and calls <code>MAKE-DOSEQ</code> to generate optimal iterator code for the given
sequence types, rather than creating dynamic iterator objects. Falls
back to the iterator interface, if the types of the sequences cannot
be determined.
</td>
</tr>
</table>
</div>
<div class="dlist">
<div class="title">Arguments</div>
<dl>
<dt class="hdlist1"><code>SEQUENCES</code></dt>
<dd>
<p>List of sequences to create iterators for.</p>
<div class="paragraph">
<p>Each element is of the form <code>(ITER SEQUENCE . ARGS)</code>, where <code>ITER</code> is
a symbol with which the iterator is identified, <code>SEQUENCE</code> is the form
producing the sequence to iterate over, and <code>ARGS</code> are the remaining
iteration arguments, interpreted as the keyword arguments to the
<a href="#iterator-func">ITERATOR</a> arguments.</p>
</div>
<div class="paragraph">
<p>Each <code>ITER</code> is a symbol that identifies the iterator, in
<code>WITH-ITER-VALUE</code> and <code>WITH-ITER-PLACE</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Iterator identifiers are in a namespace of their own that is
they do not name lexical variables/symbol-macros nor functions/macros.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>FORMS</code></dt>
<dd>
<p>A list of forms evaluated in an implicit <code>TAGBODY</code>, thus
symbols are interpreted as tag names.</p>
<div class="paragraph">
<p>The <code>WITH-ITER-VALUE</code> macro can be used, within <code>FORMS</code>, to retrieve the
current element of the sequence and advance the iterator to the next
position.</p>
</div>
<div class="paragraph">
<p>The <code>WITH-ITER-PLACE</code> macro can be used, within <code>FORMS</code>, both to
retrieve and set the value of the current element of the sequence, and
advance the iterator to the next position.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The value of the last form is not returned, due to it being
evaluated in a <code>TAGBODY</code>, instead <code>NIL</code> is returned. <code>RETURN-FROM</code>, to an
outer <code>BLOCK</code>, should be used to return a value from this form.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Whilst the intended use of <code>WITH-ITERATORS</code> is to implement
iteration macros, such as <code>DOSEQ</code>, the <code>FORMS</code> are only evaluated once. It
is up to the user to implement the actual loop, using the provided
<code>TAGBODY</code> facility.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="with_iter_value">WITH-ITER-VALUE</h4>
<div class="paragraph">
<p>Macro: <code>WITH-ITER-VALUE (PATTERN ITER) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Bind the current element of a sequence, pointed to by an iterator, to
a variable, and advance the iterator&#8217;s position to the next element.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This macro may only be used within the body of a
<a href="#with_iterators">WITH-ITERATORS</a> macro.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The value of the element at the current position of the iterator,
identified by <code>ITER</code>, is bound to the variable(s) specified by
<code>PATTERN</code>, with the bindings visible to the forms in <code>BODY</code>.</p>
</div>
<div class="paragraph">
<p>If the iterator is already at the end of the sequence, a non-local
jump to the end of the <code>WITH-ITERATORS</code> form, in which the iterator
was introduced, is performed.</p>
</div>
<div class="paragraph">
<p>After binding the values, the position of the iterator is advanced to
the next element in the sequence.</p>
</div>
<div class="dlist">
<div class="title">Arguments</div>
<dl>
<dt class="hdlist1"><code>PATTERN</code></dt>
<dd>
<p>A binding pattern specifying the variable(s) to which the
value of the element, at the current position of the iterator, is
bound.</p>
<div class="paragraph">
<p>This may either be a symbol, naming a variable, or a list which is
interpreted as a <code>DESTRUCTURING-BIND</code> pattern.</p>
</div>
</dd>
<dt class="hdlist1"><code>ITER</code></dt>
<dd>
<p>Symbol identifying the iterator, that was given as the <code>ITER</code>
argument to a parent <code>WITH-ITERATORS</code> form.</p>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>The body of the <code>WITH-ITER-VALUE</code> form, which consists of a
list of forms optionally preceded by a number of declaration
expressions.</p>
<div class="listingblock">
<div class="content">
<pre>BODY ::= DECLARATION* FORM*</pre>
</div>
</div>
<div class="paragraph">
<p>The forms are evaluated in an implicit <code>PROGN</code>, with the value of the
last form returned from the <code>WITH-ITER-VALUE</code> form. The binding(s)
introduced by <code>PATTERN</code> are visible to the forms.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If there are no more elements in the sequence, the forms are not
evaluated.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="with_iter_values">WITH-ITER-VALUES</h4>
<div class="paragraph">
<p>Macro <code>WITH-ITER-VALUES (&amp;REST BINDINGS) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Like <a href="#with_iter_value">WITH-ITER-VALUE</a> except the values of multiple sequence
elements are bound simultaneously.</p>
</div>
<div class="paragraph">
<p>If one of the iterators has reached the end of its sequence, a
non-local jump is performed to the end of the <a href="#with_iterators">WITH-ITERATORS</a> form
corresponding to the first iterator which has reached the end of its
sequence.</p>
</div>
<div class="dlist">
<div class="title">Arguments</div>
<dl>
<dt class="hdlist1"><code>BINDINGS</code></dt>
<dd>
<p>A list of sequence element bindings as if to
<code>WITH-ITER-VALUE</code>, each of the form <code>(PATTERN ITER)</code>.</p>
<div class="listingblock">
<div class="content">
<pre>((pattern-1 iter-1) (pattern-2 iter-2) ... (pattern-n iter-n))</pre>
</div>
</div>
<div class="paragraph">
<p>This is functionally equivalent to a series of nested
<code>WITH-ITER-VALUE</code> forms.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(with-iter-value (pattern-1 iter-1)
  (with-iter-value (pattern-2 iter-2)
    (...
      (with-iter-value (pattern-n iter-n)
        ,@body))))</pre>
</div>
</div>
<div class="paragraph">
<p>However unlike simply nesting <code>WITH-ITER-VALUE</code> forms, declarations
occurring in <code>BODY</code> are handled properly and associated with the
correct <code>WITH-ITER-VALUE</code> form, depending on which variable(s) they
apply to.</p>
</div>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>The body of the <code>WITH-ITER-VALUES</code> form, which consists of a
list of forms optionally preceded by a number of declaration
expressions.</p>
<div class="listingblock">
<div class="content">
<pre>BODY ::= DECLARATION* FORM*</pre>
</div>
</div>
<div class="paragraph">
<p>The forms are evaluated in an implicit <code>PROGN</code>, with the value of the
last form returned from the <code>WITH-ITER-VALUES</code> form. The binding(s)
introduced by <code>PATTERN</code> are visible to the forms.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If there are no more elements in at least one of the sequences,
the forms are not evaluated.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="with_iter_place">WITH-ITER-PLACE</h4>
<div class="paragraph">
<p>Macro: <code>WITH-ITER-PLACE (NAME ITER &amp;OPTIONAL MOREP) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Bind a symbol to the <em>place</em>, suitable for use with <code>SETF</code>, of the
current sequence element.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This macro may only be used within the body of a
<a href="#with_iterators">WITH-ITERATORS</a> macro.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A symbol-macro, with identifier given by <code>NAME</code>, is introduced, which
expands to the <em>place</em>, suitable for use with <code>SETF</code>, of the element
at the iterator&#8217;s current position. This symbol-macro is visible to
the forms in <code>BODY</code>.</p>
</div>
<div class="paragraph">
<p>If the iterator is already at the end of the sequence, a non-local
jump to the end of the <code>WITH-ITERATORS</code> form, in which it was
introduced, is performed, unless a <code>MOREP</code> variable name is given.</p>
</div>
<div class="paragraph">
<p>The iterator is also advanced to the next element of the sequence
after all forms in <code>BODY</code> are evaluated. However, the iterator is only
guaranteed to be advanced on a normal exit from the <code>WITH-ITER-PLACE</code>
form. If a non-local jump is performed, via <code>GO</code>, <code>RETURN-FROM</code> or
<code>THROW</code>, the iterator might not be advanced.</p>
</div>
<div class="dlist">
<div class="title">Arguments</div>
<dl>
<dt class="hdlist1"><code>NAME</code></dt>
<dd>
<p>Identifier of the symbol-macro to introduce.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unlike in <a href="#with_iter_value">WITH-ITER-VALUE</a> this must be a symbol and cannot
be a destructuring pattern.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>MOREP</code></dt>
<dd>
<p>Name of the variable, which is bound to true if there are
more elements in the sequence following the iterator&#8217;s position, and
to <code>NIL</code> if the end of the sequence has been reached.</p>
<div class="paragraph">
<p>If given and it is non-<code>NIL</code>, no checks are performed for whether the
iterator has reached the end of its sequence, and hence the forms in
<code>BODY</code> are not skipped. It is up to the programmer to check the value
of this variable and performed whatever logic should be performed upon
reaching the end of the sequence.</p>
</div>
</dd>
<dt class="hdlist1"><code>ITER</code></dt>
<dd>
<p>Symbol identifying the iterator, that was given as the <code>ITER</code>
argument to a parent <code>WITH-ITERATORS</code> form.</p>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>The body of the <code>WITH-ITER-PLACE</code> form, which consists of a
list of forms optionally preceded by a number of declaration
expressions.</p>
<div class="listingblock">
<div class="content">
<pre>BODY ::= DECLARATION* FORM*</pre>
</div>
</div>
<div class="paragraph">
<p>The forms are evaluated in an implicit <code>PROGN</code>, with the value of the
last form returned from the <code>WITH-ITER-PLACE</code> form.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If there are no more elements in the sequence, and a <code>MOREP</code>
variable has not been given, the forms are not evaluated, and a
non-local jump is performed to the end of the <code>WITH-ITERATORS</code>, in
which the iterator was introduced..
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="with_iter_places">WITH-ITER-PLACES</h4>
<div class="paragraph">
<p>Macro <code>WITH-ITER-PLACES (&amp;REST BINDINGS) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Like <a href="#with_iter_place">WITH-ITER-PLACE</a> except multiple places, for multiple
sequences, are bound simultaneously.</p>
</div>
<div class="paragraph">
<p>If one of the iterators has reached the end of its sequence, and a
corresponding <code>MOREP</code> variable has not been given, a non-local jump is
performed to the end of the <a href="#with_iterators">WITH-ITERATORS</a> form corresponding to
the first iterator which has reached the end of its sequence.</p>
</div>
<div class="dlist">
<div class="title">Arguments</div>
<dl>
<dt class="hdlist1"><code>BINDINGS</code></dt>
<dd>
<p>A list of sequence element place bindings as if to
<code>WITH-ITER-PLACE</code>, each of the form <code>(NAME ITER)</code> or <code>(NAME ITER
MOREP)</code>.</p>
<div class="listingblock">
<div class="content">
<pre>((name-1 iter-1) (name-2 iter-2) ... (name-n iter-n))</pre>
</div>
</div>
<div class="paragraph">
<p>This is functionally equivalent to a series of nested
<code>WITH-ITER-PLACE</code> forms.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(with-iter-place (name-1 iter-1)
  (with-iter-place (name-2 iter-2)
    (...
      (with-iter-place (name-n iter-n)
        ,@body))))</pre>
</div>
</div>
<div class="paragraph">
<p>However unlike simply nesting <code>WITH-ITER-PLACE</code> forms, declarations
occurring in <code>BODY</code> are handled properly and associated with the
correct <code>WITH-ITER-PLACE</code> form, depending on which variable(s) they
apply to.</p>
</div>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>The body of the <code>WITH-ITER-PLACES</code> form, which consists of a
list of forms optionally preceded by a number of declaration
expressions.</p>
<div class="listingblock">
<div class="content">
<pre>BODY ::= DECLARATION* FORM*</pre>
</div>
</div>
<div class="paragraph">
<p>The forms are evaluated in an implicit <code>PROGN</code>, with the value of the
last form returned from the <code>WITH-ITER-PLACES</code> form. The
symbol-macro(s) introduced in <code>BINDINGS</code> are visible to the forms.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="do_iter_values">DO-ITER-VALUES</h4>
<div class="paragraph">
<p>Macro <code>DO-ITER-VALUES (&amp;REST ITERS) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Iterate over the remaining elements following the positions of one or
more iterators.</p>
</div>
<div class="paragraph">
<p>The list of forms in <code>BODY</code> are evaluated at each iteration, until one
of the iterators reaches the end of its sequence.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
May only be used inside a <a href="#with_iterators">WITH-ITERATORS</a> form.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ITERS</code></dt>
<dd>
<p>List of element value bindings.</p>
<div class="paragraph">
<p>Each element is of the form <code>(PATTERN ITER)</code>, as if to
<a href="#with_iter_value">WITH-ITER-VALUE</a>, where <code>PATTERN</code> is the binding pattern,
specifying the variable(s) which will receive the value of the current
element and <code>ITER</code> is the identifier of the iterator, as given in the
<code>ITER</code> argument of the <a href="#with_iterators">WITH-ITERATORS</a> form.</p>
</div>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>The body of the <code>DO-ITER-VALUES</code> form, which consists of a
list of forms optionally preceded by a number of declaration
expressions.</p>
<div class="listingblock">
<div class="content">
<pre>BODY ::= DECLARATION* FORM*</pre>
</div>
</div>
<div class="paragraph">
<p>The forms are evaluated once for each element, after which each
iterator is advanced to the next element in its sequence.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This form returns <code>NIL</code>.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
When the end of a sequence is reached, a non-local jump to
the <code>WITH-ITERATORS</code> form, corresponding to the sequence&#8217;s iterator,
is performed. Thus any forms following the <code>DO-ITER-VALUES</code> form are
skipped.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="do_iter_places">DO-ITER-PLACES</h4>
<div class="paragraph">
<p>Macro <code>DO-ITER-PLACES (&amp;REST ITERS) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Like <a href="#do_iter_values">DO-ITER-VALUES</a> except the bindings to the <em>places</em>, with
<a href="#with_iter_place">WITH-ITER-PLACE</a>, are introduced, rather than bindings to the
values of the sequence elements.</p>
</div>
<div class="paragraph">
<p>The list of forms in <code>BODY</code> are evaluated at each iteration, until one
of the iterators reaches the end of its sequence.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
May only be used inside a <a href="#with_iterators">WITH-ITERATORS</a> form.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ITERS</code></dt>
<dd>
<p>List of element place bindings.</p>
<div class="paragraph">
<p>Each element is of the form <code>(NAME ITER)</code>, as if to
<a href="#with_iter_place">WITH-ITER-PLACE</a>, where <code>NAME</code> is the name of the symbol-macro
expanding to the element place, and <code>ITER</code> is the identifier of the
iterator, as given in the <code>ITER</code> argument of the <a href="#with_iterators">WITH-ITERATORS</a>
form.</p>
</div>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>The body of the <code>DO-ITER-PLACES</code> form, which consists of a
list of forms optionally preceded by a number of declaration
expressions.</p>
<div class="listingblock">
<div class="content">
<pre>BODY ::= DECLARATION* FORM*</pre>
</div>
</div>
<div class="paragraph">
<p>The forms are evaluated once for each element, after which each
iterator is advanced to the next element in its sequence.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This form returns <code>NIL</code>.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
When the end of a sequence is reached, a non-local jump to
the <code>WITH-ITERATORS</code> form, corresponding to the sequence&#8217;s iterator,
is performed. Thus any forms following the <code>DO-ITER-PLACES</code> form are
skipped.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="doiters">DOITERS</h4>
<div class="paragraph">
<p>Macro: <code>DOITERS (&amp;REST ITERS) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Iterate over one or more sequences with the sequence iterators bound
to variables.</p>
</div>
<div class="paragraph">
<p>Each element of <code>ITERS</code> is a list of the form <code>(IT-VAR
SEQUENCE . ARGS)</code>, where <code>IT-VAR</code> is the variable to which the
iterator is bound, <code>SEQUENCE</code> is the sequence which will be iterated
over and <code>ARGS</code> are the remaining arguments passed to the
<a href="#iterator-func">ITERATOR</a> function.</p>
</div>
<div class="paragraph">
<p>The bindings to the <code>IT-VAR</code>'s are visible to the forms in <code>BODY</code>,
which are executed once for each element in the sequence. After each
iteration the sequence iterators are <a href="#advance">ADVANCE</a>'d. The loop
terminates when the end of a sequence is reached.</p>
</div>
</div>
<div class="sect3">
<h4 id="doiter">DOITER</h4>
<div class="paragraph">
<p>Macro: <code>DOITER (ITER &amp;REST ARGS) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>The is the same as <a href="#doiters">DOITERS</a> except only a single sequence is
iterated over.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="implemented_interfaces">Implemented Interfaces</h3>
<div class="paragraph">
<p>This interface adds methods, when the system implementing the
interface is loaded, specialized on <code>ITERATOR</code>'s to the following
functions:</p>
</div>
<div class="sect3">
<h4 id="iterator-length">LENGTH</h4>
<div class="paragraph">
<p>Method: <code>LENGTH (ITERATOR ITERATOR)</code></p>
</div>
<div class="paragraph">
<p>Returns the number of elements between the iterator&#8217;s current
position (inclusive) and the end of the iterator&#8217;s subsequence.</p>
</div>
<div class="paragraph">
<p>This is implemented by advancing the iterator (by <a href="#advance">ADVANCE</a>) till
<a href="#endp">ENDP</a> returns true, thus is a linear <code>O(n)</code> time operation.</p>
</div>
<div class="paragraph">
<p>More efficient specialized methods are provided for iterators to
sequences for which the size is known.</p>
</div>
</div>
<div class="sect3">
<h4 id="iterator-subseq">SUBSEQ</h4>
<div class="paragraph">
<p>Method: <code>SUBSEQ (ITERATOR ITERATOR) START &amp;OPTIONAL END</code></p>
</div>
<div class="paragraph">
<p>Returns a subsequence iterator which wraps a copy of the original
iterator.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="optimization">Optimization</h3>
<div class="paragraph">
<p>The iteration macros, <a href="#doseq">DOSEQ</a>, <a href="#doseq_2">DOSEQ!</a>, and the corresponding
macros for multiple sequences, can be optimized to generate
specialized iteration code for a given sequence type so that the
creation of <em>iterator objects</em> and the dynamic dispatch involving the
iterator methods, can be avoided.</p>
</div>
<div class="paragraph">
<p>These are implemented in terms of the <a href="#low-level-iter-macros">Low-Level Macros</a>,
specifically the <a href="#with_iterators">WITH-ITERATORS</a> family of macros. <code>WITH-ITERATORS</code>
attempts to determine the type of each sequence and calls
<a href="#make_doseq">MAKE-DOSEQ</a> to generate specialized iteration code.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The symbols documented in this section are contained in the
<code>GENERIC-CL.ITERATOR.OPTIMIZATION</code> package, which is not exported by
<code>GENERIC-CL</code>. Thus it has to be manually imported. It doesn&#8217;t contain
nay shadowing symbols so it can simply be <em>used</em>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="make_doseq">MAKE-DOSEQ</h4>
<div class="paragraph">
<p>Generic Function: <code>MAKE-DOSEQ TYPE SEQUENCE ARGS TAG BODY ENVIRONMENT</code></p>
</div>
<div class="paragraph">
<p>Generate the <a href="#with_iterators">WITH-ITERATORS</a> expansion for a sequence of a given
type.</p>
</div>
<h5 id="combination" class="float">Combination</h5>
<div class="paragraph">
<p>This method has the <code>SUBTYPE</code> method combination, thus each method
should have a single qualifier which is interpreted as a type
specifier symbol.</p>
</div>
<div class="paragraph">
<p>When the generic function is called with a given sequence type, passed
to the <code>TYPE</code> argument, the method with the most derived type, given
in the qualifier, which is a subtype of <code>TYPE</code> is called.</p>
</div>
<div class="paragraph">
<p>Most derived means that if there are two methods with qualifiers which
are a both subtypes of the type given in <code>TYPE</code>, the method with the
qualifier that is a subtype of the other method&#8217;s qualifier, is
called.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>CALL-NEXT-METHOD</code> and auxiliary methods are not supported by
this combination.
</td>
</tr>
</table>
</div>
<h5 id="arguments" class="float">Arguments</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>TYPE</code></dt>
<dd>
<p>The full sequence type as determined by the <code>WITH-ITERATORS</code>
macro.</p>
</dd>
<dt class="hdlist1"><code>SEQUENCE</code></dt>
<dd>
<p>The form which produces the sequence.</p>
</dd>
<dt class="hdlist1"><code>ARGS</code></dt>
<dd>
<p>Remaining iterator arguments following the sequence.</p>
<div class="paragraph">
<p>These should be interpreted as they are in the <a href="#iterator-func">ITERATOR</a>
function, that is the keyword arguments <code>:START</code>, <code>:END</code> and
<code>:FROM-END</code> should be supported.</p>
</div>
</dd>
<dt class="hdlist1"><code>TAG</code></dt>
<dd>
<p>Name of the tag, in an enclosing <code>TAGBODY</code> form, to jump to,
with <code>GO</code>, when the end of the sequence is reached.</p>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>List of forms comprising the body of the <code>WITH-ITERATORS</code>
form. These may be preceded by a number of declaration expressions.</p>
</dd>
<dt class="hdlist1"><code>ENV</code></dt>
<dd>
<p>The environment in which the <code>WITH-ITERATORS</code> form is found.</p>
</dd>
</dl>
</div>
<h5 id="return_values" class="float">Return Values</h5>
<div class="paragraph">
<p>Methods of this function should return the following values:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A list of bindings, as if by <code>LET*</code>, which are established before
the first iteration and are visible to the body forms of the
<code>WITH-ITERATORS</code> form.</p>
<div class="paragraph">
<p>Each binding, in this list, may optional provide the following keyword
arguments, after the init-form:</p>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>:CONSTANT</code></dt>
<dd>
<p>Flag for whether the variable should be treated as a
constant</p>
<div class="paragraph">
<p>If true and the init-form is a constant form, by <code>CONSTANTP</code>, the
symbol is bound by <code>SYMBOL-MACROLET</code>, rather than <code>LET*</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A constant binding may only reference other bindings, preceding
it, for which this flag is also true.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
</li>
<li>
<p>The new body of the <code>WITH-ITERATORS</code> form. This body is passed to
the <code>MAKE-DOSEQ</code> methods of the other sequences.</p>
</li>
<li>
<p>A lexical macro definition defining the expansion of the
<a href="#with_iter_value">WITH-ITER-VALUE</a> for the sequence&#8217;s iterator.</p>
<div class="paragraph">
<p>This should be a list of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(LAMBDA-LIST . BODY)</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>LAMBDA-LIST</code> is the macro lambda-list and <code>BODY</code> is the macro
definition body. A name should not be provided since one is
automatically generated.</p>
</div>
<div class="paragraph">
<p>The lambda-list should have the following arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(PATTERN &amp;BODY BODY)</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>PATTERN</code> is the binding pattern, corresponding to the <code>PATTERN</code>
argument of <a href="#with_iter_value">WITH-ITER-VALUE</a>, specifying the variable(s) which
receive the value of the current sequence element.</p>
</div>
<div class="paragraph">
<p>This may either be a symbol, naming a variable, or a list which should
be interpreted as a <code>DESTRUCTURING-BIND</code> pattern.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use <a href="#with_destructure_pattern">WITH-DESTRUCTURE-PATTERN</a> to automatically support
destructuring patterns. This also handles declarations correctly.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>BODY</code> is the list of body forms of the <code>WITH-ITER-VALUE</code> form,
corresponding to the <code>BODY</code> argument. These may be preceded by
declarations some of which, might apply to variables in outer
<code>WITH-ITER-VALUE</code> forms.</p>
</div>
<div class="paragraph">
<p>The macro should expand to a form which:</p>
</div>
<div class="openblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Checks whether the end of the sequence has been reached. If so
jumps, using <code>GO</code>, to the tag name given in the <code>TAG</code> argument to
<code>MAKE-DOSEQ</code>.</p>
</li>
<li>
<p>Binds the current sequence element to the variable(s) specified in
<code>PATTERN</code></p>
</li>
<li>
<p>Advances the position of the iterator to the next element
in the sequence</p>
</li>
<li>
<p>Evaluates the body forms.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>Declarations not applying to the variable(s) in <code>PATTERN</code>, should be
placed in a <code>LOCALLY</code> form wrapping the macro expansion, in order for
them to be processed by other <code>WITH-ITER-VALUE</code> forms. Additionally
the macro should also recognize a body consisting of a single
<code>LOCALLY</code> form, and process the declarations in that form as though
they occurred directly in the body. <a href="#with_destructure_pattern">WITH-DESTRUCTURE-PATTERN</a>
handles this automatically.</p>
</div>
</li>
<li>
<p>A lexical macro definition defining the expansion of
<a href="#with_iter_place">WITH-ITER-PLACE</a> for the sequence&#8217;s iterator.</p>
<div class="paragraph">
<p>This should be a list of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(LAMBDA-LIST . BODY)</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>LAMBDA-LIST</code> is the macro lambda-list and <code>BODY</code> is the macro
definition body. A name should not be provided since one is
automatically generated.</p>
</div>
<div class="paragraph">
<p>The lambda-list should have the following arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(NAME MOREP &amp;BODY BODY)</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>NAME</code> is the name of the symbol-macro to be introduced,
expanding to the <em>place</em> of the current position of the iterator,
corresponding to the <code>NAME</code> argument of <a href="#with_iter_place">WITH-ITER-PLACE</a>.</p>
</div>
<div class="paragraph">
<p><code>MOREP</code> corresponds to the <code>MOREP</code> argument of <a href="#with_iter_place">WITH-ITER-PLACE</a>,
which is the name of the variable receiving a flag for whether there
are more elements in the sequence (true), or whether the end of the
sequence has been reached (<code>NIL</code>).</p>
</div>
<div class="paragraph">
<p><code>BODY</code> is the list of body forms of the <code>WITH-ITER-PLACE</code> form,
corresponding to the <code>BODY</code> argument. These may be preceded by
declarations some of which, might apply to symbol-macros introduced by
outer <code>WITH-ITER-PLACE</code> forms.</p>
</div>
<div class="paragraph">
<p>The macro should expand to a form which:</p>
</div>
<div class="openblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If <code>MOREP</code> is <code>NIL</code>, checks whether the end of the sequence has
been reached. If so jumps, using <code>GO</code>, to the tag name given in the
<code>TAG</code> argument to <code>MAKE-DOSEQ</code>. If <code>MOREP</code> is non-<code>NIL</code> binds the
variable given in <code>MOREP</code> to true if there are more elements in the
sequence, or to <code>NIL</code> if the end of the sequence has been reached.</p>
</li>
<li>
<p>Creates a lexical symbol-macro, with identifier <code>NAME</code> that expands
to the place of the current position of the iterator.</p>
</li>
<li>
<p>Evaluates the body forms.</p>
</li>
<li>
<p>Advances the position of the iterator.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>Declarations not applying to the symbol-macro, should be placed in a
<code>LOCALLY</code> form wrapping the macro expansion, in order for them to be
processed by other <code>WITH-ITER-PLACE</code> forms. Additionally the macro
should also recognize a body consisting of a single <code>LOCALLY</code> form,
and process the declarations in that form as though they occurred
directly in the body. <a href="#with_variable_declarations">WITH-VARIABLE-DECLARATIONS</a> handles this
automatically.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The macro <a href="#iter_macro">ITER-MACRO</a>, facilitates the creation of these
lexical macro definitions, removing the need for multiple nested
layers of backquotes. Use this macro when defining your own
<code>MAKE-DOSEQ</code> methods.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="iter_macro">ITER-MACRO</h4>
<div class="paragraph">
<p>Macro: <code>ITER-MACRO (&amp;REST VARS) (&amp;REST LAMBDA-LIST) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Utility macro for generating lexical macro definitions for
<a href="#with_iter_value">WITH-ITER-VALUE</a> and <a href="#with_iter_place">WITH-ITER-PLACE</a>.</p>
</div>
<div class="paragraph">
<p>This macro is intended to be used within <a href="#make_doseq">MAKE-DOSEQ</a> to facilitate
the definition, by avoiding the need for nested backquotes, of the
lexical macros, serving as the expansion of <code>WITH-ITER-VALUE</code> and
<code>WITH-ITER-PLACE</code> for a given iterator type.</p>
</div>
<h5 id="arguments_2" class="float">Arguments</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>VARS</code></dt>
<dd>
<p>List of variables to <em>capture</em> from the lexical scope of the
<code>ITER-MACRO</code> form.</p>
<div class="paragraph">
<p>Lexical variables are generated for each variable that is listed,
accessible to the definition body, which are set to the values of the
equivalent variables evaluated in the scope of the <code>ITER-MACRO</code> form.</p>
</div>
</dd>
<dt class="hdlist1"><code>LAMBDA-LIST</code></dt>
<dd>
<p>Macro lambda-list (not evaluated).</p>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>The body of the macro definition, consisting of a list of
forms optionally preceded by declaration expressions.</p>
<div class="paragraph">
<p>These are not evaluated but are literally inserted in the body of the
macro definition. The forms have access to the variables listed in
<code>VARS</code>, at the time the macro is expanded.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="with_destructure_pattern">WITH-DESTRUCTURE-PATTERN</h4>
<div class="paragraph">
<p>Macro <code>WITH-DESTRUCTURE-PATTERN (VAR PATTERN) (FORMS-VAR DECL-VAR BODY-FORM) &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Automatically generate destructuring code if the binding pattern is a
destructuring-bind pattern.</p>
</div>
<div class="paragraph">
<p>This macro allows a <a href="#with_iter_value">WITH-ITER-VALUE</a> macro to be written whilst
focusing only on the case where the binding pattern is a variable
receiving the entire element value. The macro automatically generates
destructuring code if the binding pattern is a list.</p>
</div>
<div class="paragraph">
<p>This macro also handles declarations automatically.</p>
</div>
<h5 id="arguments_3" class="float">Arguments</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>VAR</code></dt>
<dd>
<p>Name of the variable receiving the name of the variable to
which the element value is bound.</p>
</dd>
<dt class="hdlist1"><code>PATTERN</code></dt>
<dd>
<p>Form producing the binding pattern (evaluated).</p>
</dd>
<dt class="hdlist1"><code>FORMS-VAR</code></dt>
<dd>
<p>Name of the variable receiving the list of body forms of
the <code>WITH-ITER-MACRO</code>.</p>
</dd>
<dt class="hdlist1"><code>DECL-VAR</code></dt>
<dd>
<p>Name of the variable receiving the list of declarations
applying to the variable in <code>VAR</code>.</p>
</dd>
<dt class="hdlist1"><code>BODY-FORM</code></dt>
<dd>
<p>Form producing the <code>WITH-ITER-VALUE</code> body (evaluated).</p>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>List of forms evaluated in an implicit <code>PROGN</code>. The return
value of the last form is returned as the macroexpansion of the
<code>WITH-ITER-VALUE</code>, wrapped in the destructuring code if necessary.</p>
<div class="paragraph">
<p>May be preceded by declaration expressions.</p>
</div>
<div class="paragraph">
<p>The expansion returned should bind the variable in <code>VAR</code> to the value
of the next element in the sequence and evaluate the forms in
<code>FORMS-VAR</code> in the context of that binding.</p>
</div>
</dd>
</dl>
</div>
<h5 id="declarations" class="float">Declarations</h5>
<div class="paragraph">
<p>This macro takes care of handling declarations in the result returned
by <code>BODY-FORM</code>. The declarations applying to the variables in the
destructuring pattern, are inserted in the resulting
<code>destructuring-bind</code> form, <code>DECL-VAR</code> is bound to the declarations
applying to the variable given in <code>VAR</code>, and the remaining
declarations are inserted in a <code>LOCALLY</code> form, wrapping the entire
expansion.</p>
</div>
</div>
<div class="sect3">
<h4 id="with_variable_declarations">WITH-VARIABLE-DECLARATIONS</h4>
<div class="paragraph">
<p>Macro: <code>WITH-VARIABLE-DECLARATIONS (&amp;REST BINDINGS) FORMS-VAR BODY-FORM &amp;BODY BODY</code></p>
</div>
<div class="paragraph">
<p>Split a body into the declarations, applying to specific variables,
and its forms.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Intended to be used in the lexical macro definition for
<a href="#with_iter_place">WITH-ITER-PLACE</a> for a sequence type.
</td>
</tr>
</table>
</div>
<h5 id="arguments_4" class="float">Arguments</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>BINDINGS</code></dt>
<dd>
<p>List of variables for which to extract the declarations.</p>
<div class="paragraph">
<p>Each element is of the form <code>(DECL-VAR VAR)</code>, where <code>DECL-VAR</code> is the
name of the variable which is to receive the list of declarations
applying to the variable given by <code>VAR</code> (evaluated).</p>
</div>
</dd>
<dt class="hdlist1"><code>FORMS-VAR</code></dt>
<dd>
<p>Name of the variable receiving the list of forms in the
body.</p>
</dd>
<dt class="hdlist1"><code>BODY-FORM</code></dt>
<dd>
<p>Form producing the body.</p>
</dd>
<dt class="hdlist1"><code>BODY</code></dt>
<dd>
<p>List of forms evaluated in an implicit <code>PROGN</code>, with the result
returned by the last form included in the resulting expansion.</p>
</dd>
</dl>
</div>
<h5 id="expansion" class="float">Expansion</h5>
<div class="paragraph">
<p>The value returned by the macro is a <code>LOCALLY</code> form containing the
declarations not applying to any of the variables listed in <code>BINDINGS</code>
and the body of which is the form returned by the last form in <code>BODY</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="collector">Collector</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name <code>GENERIC-CL.COLLECTOR</code>.</p>
</div>
<div class="paragraph">
<p>The collector interface is a generic interface for accumulating items
into a sequence/container.</p>
</div>
<div class="paragraph">
<p>Implemented for lists and vectors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
While this interface is specified for sequences, it may also be
implemented for unordered containers.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Basic Usage</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-c1">;; Create collector for the sequence, in this case an empty list</span>
<span class="tok-p">(</span><span class="tok-k">let</span> <span class="tok-p">((</span><span class="tok-nv">c</span> <span class="tok-p">(</span><span class="tok-nv">make-collector</span> <span class="tok-no">nil</span><span class="tok-p">)))</span>
  <span class="tok-p">(</span><span class="tok-nv">accumulate</span> <span class="tok-nv">c</span> <span class="tok-mi">1</span><span class="tok-p">)</span>        <span class="tok-c1">; Collect 1 into the sequence</span>
  <span class="tok-p">(</span><span class="tok-nv">accumulate</span> <span class="tok-nv">c</span> <span class="tok-mi">2</span><span class="tok-p">)</span>        <span class="tok-c1">; Collect 2 into the sequence</span>
  <span class="tok-p">(</span><span class="tok-nv">extend</span> <span class="tok-nv">c</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-mi">3</span> <span class="tok-mi">4</span> <span class="tok-mi">5</span><span class="tok-p">))</span>     <span class="tok-c1">; Collect 3, 4, 5 into the sequence</span>
  <span class="tok-p">(</span><span class="tok-nv">collector-sequence</span> <span class="tok-nv">c</span><span class="tok-p">))</span> <span class="tok-c1">; Get the resulting sequence =&gt; &#39;(1 2 3 4 5)</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="make_collector">MAKE-COLLECTOR</h3>
<div class="paragraph">
<p>Generic Function: <code>MAKE-COLLECTOR SEQUENCE &amp;KEY FRONT</code></p>
</div>
<div class="paragraph">
<p>Return a collector for accumulating items to the end of the sequence
<code>SEQUENCE</code>.</p>
</div>
<div class="paragraph">
<p>If <code>:FRONT</code> is provided and is true, the items are accumulated to the
front of the sequence rather than end.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The collector may destructively modify <code>SEQUENCE</code> however
it is not required to do so and may accumulate items into a copy of
<code>SEQUENCE</code> instead.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="accumulate">ACCUMULATE</h3>
<div class="paragraph">
<p>Generic Function: <code>ACCUMULATE COLLECTOR ITEM</code></p>
</div>
<div class="paragraph">
<p>Accumulate <code>ITEM</code> into the sequence associated with the collector
<code>COLLECTOR</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="collector_sequence">COLLECTOR-SEQUENCE</h3>
<div class="paragraph">
<p>Generic Function: <code>COLLECTOR-SEQUENCE COLLECTOR</code></p>
</div>
<div class="paragraph">
<p>Return the underlying sequence associated with the collector
<code>COLLECTOR</code>.</p>
</div>
<div class="paragraph">
<p>The sequence should contain all items accumulated up to the call to
this function.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The effects of accumulating items into the sequence, by
<a href="#accumulate">ACCUMULATE</a> or <a href="#extend">EXTEND</a>, after this function is
called, are unspecified.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The sequence returned might not be the same object passed to
<a href="#make_collector">MAKE-COLLECTOR</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="extend">EXTEND</h3>
<div class="paragraph">
<p>Generic Function: <code>EXTEND COLLECTOR SEQUENCE</code></p>
</div>
<div class="paragraph">
<p>Accumulate all elements of the sequence <code>SEQUENCE</code> into the sequence
associated with the collector <code>COLLECTOR</code>.</p>
</div>
<div class="paragraph">
<p>If <code>SEQUENCE</code> is an iterator all elements up-to the end of the
iterator (till <a href="#endp">ENDP</a> returns true) should be accumulated.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Implementing this method is optional as default methods are
provided for iterators and sequences, which simply accumulate each
element one by one using <a href="#accumulate">ACCUMULATE</a>.
</td>
</tr>
</table>
</div>
<h4 id="methods" class="float">Methods</h4>
<div class="ulist">
<ul>
<li>
<p><code>T ITERATOR</code></p>
<div class="paragraph">
<p>Accumulates all elements returned by the iterator <code>SEQUENCE</code>
(till <code>(ENDP SEQUENCE)</code> returns true), into the sequence
associated with the collector.</p>
</div>
<div class="paragraph">
<p>The elements are accumulated one by one using <a href="#accumulate">ACCUMULATE</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The iterator is copied thus the position of the iterator passed
as an argument is not modified.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>T T</code></p>
<div class="paragraph">
<p>Accumulates all elements of <code>SEQUENCE</code>, into the sequence
associated with the collector.</p>
</div>
<div class="paragraph">
<p>The elements are accumulated one by one using <a href="#accumulate">ACCUMULATE</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The sequence iteration is done using the <a href="#iterator">Iterator</a> interface.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sequence">Sequence</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name <code>GENERIC-CL.SEQUENCE</code></p>
</div>
<div class="paragraph">
<p>Generic sequence operations.</p>
</div>
<div class="paragraph">
<p>Generic function wrappers, which are identical in behavior to their
counterparts in the <code>COMMON-LISP</code> package, are provided for the
following sequence operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FILL</code></p>
</li>
<li>
<p><code>REPLACE</code></p>
</li>
<li>
<p><code>REDUCE</code></p>
</li>
<li>
<p><code>COUNT</code></p>
</li>
<li>
<p><code>COUNT-IF</code></p>
</li>
<li>
<p><code>COUNT-IF-NOT</code></p>
</li>
<li>
<p><code>FIND</code></p>
</li>
<li>
<p><code>FIND-IF</code></p>
</li>
<li>
<p><code>FIND-IF-NOT</code></p>
</li>
<li>
<p><code>POSITION</code></p>
</li>
<li>
<p><code>POSITION-IF</code></p>
</li>
<li>
<p><code>POSITION-IF-NOT</code></p>
</li>
<li>
<p><code>SEARCH</code></p>
</li>
<li>
<p><code>MISMATCH</code></p>
</li>
<li>
<p><code>REVERSE</code></p>
</li>
<li>
<p><code>NREVERSE</code></p>
</li>
<li>
<p><code>SUBSTITUTE</code></p>
</li>
<li>
<p><code>NSUBSTITUTE</code></p>
</li>
<li>
<p><code>SUBSTITUTE-IF</code></p>
</li>
<li>
<p><code>NSUBSTITUTE-IF</code></p>
</li>
<li>
<p><code>SUBSTITUTE-IF-NOT</code></p>
</li>
<li>
<p><code>NSUBSTITUTE-IF-NOT</code></p>
</li>
<li>
<p><code>REMOVE</code></p>
</li>
<li>
<p><code>DELETE</code></p>
</li>
<li>
<p><code>REMOVE-IF</code></p>
</li>
<li>
<p><code>DELETE-IF</code></p>
</li>
<li>
<p><code>REMOVE-IF-NOT</code></p>
</li>
<li>
<p><code>DELETE-IF-NOT</code></p>
</li>
<li>
<p><code>REMOVE-DUPLICATES</code></p>
</li>
<li>
<p><code>DELETE-DUPLICATES</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Two methods are implemented, for all functions, which are specialized
on the following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CL:SEQUENCE</code></p>
<div class="paragraph">
<p>Simply calls the corresponding function in the <code>COMMON-LISP</code>
package.</p>
</div>
</li>
<li>
<p><code>T</code></p>
<div class="paragraph">
<p>Implements the sequence operation for generic sequences using the
<a href="#iterator">Iterator</a> interface.</p>
</div>
<div class="paragraph">
<p>The non-destructive functions only require that the
<a href="#mandatory_functions">Mandatory Iterator Functions</a>, the
<a href="#collector">Collector</a> interface and <a href="#cleared">CLEARED</a> method are
implemented for the sequence&#8217;s type.</p>
</div>
<div class="paragraph">
<p>The destructive versions may additionally require that the optional
<a href="#setf-at">(SETF AT)</a> method is implemented as well.</p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The default value of the <code>:TEST</code> keyword argument is
<a href="#equalp">GENERIC-CL:EQUALP</a>. This should be the default value when
implementing methods for user-defined sequence types. The <code>:TEST-NOT</code>
keyword arguments have been removed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following functions are identical in behavior to their <code>CL</code>
counterparts, however are re-implemented using the iterator
interface. Unlike the functions in the previous list, these are not
generic functions since they take an arbitrary number of sequences as
arguments.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>EVERY</code></p>
</li>
<li>
<p><code>SOME</code></p>
</li>
<li>
<p><code>NOTEVERY</code></p>
</li>
<li>
<p><code>NOTANY</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following functions either have no <code>CL</code> counterparts or differ
slightly in behavior from their <code>CL</code> counterparts:</p>
</div>
<div class="sect2">
<h3 id="find_it">FIND-IT</h3>
<div class="paragraph">
<p>Generic Function: <code>FIND-IT ITEM SEQUENCE &amp;KEY FROM-END START END TEST KEY</code></p>
</div>
<div class="paragraph">
<p>Find an element in a sequence and return an iterator to the position
at which it was found.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is the same as <code>FIND</code> except it returns an iterator to the
position at which an element is found rather than the element itself.
</td>
</tr>
</table>
</div>
<h4 id="arguments_5" class="float">Arguments</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ITEM</code></dt>
<dd>
<p>The item to find in the sequence.</p>
</dd>
<dt class="hdlist1"><code>SEQUENCE</code></dt>
<dd>
<p>The sequence to search.</p>
</dd>
<dt class="hdlist1"><code>FROM-END</code></dt>
<dd>
<p>If true the sequence is searched starting from the end.</p>
</dd>
<dt class="hdlist1"><code>START</code></dt>
<dd>
<p>Index of the starting position from which to search the
sequence. By default searches from the start of the sequence.</p>
</dd>
<dt class="hdlist1"><code>END</code></dt>
<dd>
<p>Index of the position till which the sequence is searched. If
<code>NIL</code> (the default) the entire sequence is searched.</p>
</dd>
<dt class="hdlist1"><code>TEST</code></dt>
<dd>
<p>Test function to use when comparing <code>ITEM</code> to elements of
<code>SEQUENCE</code>. By default <a href="#equalp">EQUALP</a>.</p>
</dd>
<dt class="hdlist1"><code>KEY</code></dt>
<dd>
<p>Function which is applied on each element of <code>SEQUENCE</code>. The
result returned is then compared to <code>ITEM</code> using <code>TEST</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If the item was found in the sequence, returns the iterator to the
first position, or last if <code>FROM-END</code> is true, at which it was
found. If no such item was found, <code>NIL</code> is returned.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The iterator returned should point to the same sequence
object that is passed to this function. This is to allow iterating
over the remaining elements of the sequence and to allow for modifying
the sequence.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="find_it_if">FIND-IT-IF</h3>
<div class="paragraph">
<p>Generic Function: <code>FIND-IT-IF PREDICATE SEQUENCE &amp;KEY FROM-END START END KEY</code></p>
</div>
<div class="paragraph">
<p>Find an element, which satisfies a predicate, in a sequence and return
an iterator to the position at which it was found.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is the same as <code>FIND-IF</code> except it returns an iterator to the
position at which an element is found rather than the element itself.
</td>
</tr>
</table>
</div>
<h4 id="arguments_6" class="float">Arguments</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>PREDICATE</code></dt>
<dd>
<p>A predicate function, of one argument, applied on each
element of sequence. The element for which this function returns true,
is returned.</p>
</dd>
<dt class="hdlist1"><code>SEQUENCE</code></dt>
<dd>
<p>The sequence to search.</p>
</dd>
<dt class="hdlist1"><code>FROM-END</code></dt>
<dd>
<p>If true the sequence is searched starting from the end.</p>
</dd>
<dt class="hdlist1"><code>START</code></dt>
<dd>
<p>Index of the starting position from which to search the
sequence. By default searches from the start of the sequence.</p>
</dd>
<dt class="hdlist1"><code>END</code></dt>
<dd>
<p>Index of the position till which the sequence is searched. If
<code>NIL</code> (the default) the entire sequence is searched.
<code>SEQUENCE</code>.</p>
</dd>
<dt class="hdlist1"><code>KEY</code></dt>
<dd>
<p>Function which is applied on each element of <code>SEQUENCE</code>. The
result returned is then passed to the predicate function.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Returns an iterator to the first item, or last if <code>FROM-END</code> is true,
for which the predicate returns true. If no element is found, <code>NIL</code> is
returned.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The iterator returned should point to the same sequence
object that is passed to this function. This is to allow iterating
over the remaining elements of the sequence and to allow for modifying
the sequence.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="find_it_if_not">FIND-IT-IF-NOT</h3>
<div class="paragraph">
<p>Generic Function: <code>FIND-IT-IF PREDICATE SEQUENCE &amp;KEY FROM-END START END KEY</code></p>
</div>
<div class="paragraph">
<p>Find an element, which does not satisfy a predicate, in a sequence and
return an iterator to the position at which it was found.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is the same as <code>FIND-IF-NOT</code> except it returns an iterator to the
position at which an element is found rather than the element itself.
</td>
</tr>
</table>
</div>
<h4 id="arguments_7" class="float">Arguments</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>PREDICATE</code></dt>
<dd>
<p>A predicate function, of one argument, applied on each
element of sequence. The element for which this function returns false (<code>NIL</code>),
is returned.</p>
</dd>
<dt class="hdlist1"><code>SEQUENCE</code></dt>
<dd>
<p>The sequence to search.</p>
</dd>
<dt class="hdlist1"><code>FROM-END</code></dt>
<dd>
<p>If true the sequence is searched starting from the end.</p>
</dd>
<dt class="hdlist1"><code>START</code></dt>
<dd>
<p>Index of the starting position from which to search the
sequence. By default searches from the start of the sequence.</p>
</dd>
<dt class="hdlist1"><code>END</code></dt>
<dd>
<p>Index of the position till which the sequence is searched. If
<code>NIL</code> (the default) the entire sequence is searched.
<code>SEQUENCE</code>.</p>
</dd>
<dt class="hdlist1"><code>KEY</code></dt>
<dd>
<p>Function which is applied on each element of <code>SEQUENCE</code>. The
result returned is then passed to the predicate function.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Returns an iterator to the first item, or last if <code>FROM-END</code> is true,
for which the predicate returns false. If no element is found, <code>NIL</code>
is returned.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The iterator returned should point to the same sequence
object that is passed to this function. This is to allow iterating
over the remaining elements of the sequence and to allow for modifying
the sequence.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="merge">MERGE</h3>
<div class="paragraph">
<p>Generic Function: <code>MERGE SEQUENCE1 SEQUENCE2 PREDICATE &amp;KEY</code></p>
</div>
<div class="paragraph">
<p>Return a new sequence, of the same type as <code>SEQUENCE1</code>, containing the
elements of <code>SEQUENCE1</code> and <code>SEQUENCE2</code>.</p>
</div>
<div class="paragraph">
<p>The elements are ordered according to the function <code>PREDICATE</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Unlike <code>CL:MERGE</code> this function is non-destructive.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nmerge">NMERGE</h3>
<div class="paragraph">
<p>Generic Function: <code>MERGE SEQUENCE1 SEQUENCE2 PREDICATE &amp;KEY</code></p>
</div>
<div class="paragraph">
<p>Same as <a href="#merge">MERGE</a> however is permitted to destructively modify either
<code>SEQUENCE1</code> or <code>SEQUENCE2</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="sort">SORT</h3>
<div class="paragraph">
<p>Generic Function: <code>SORT SEQUENCE &amp;KEY TEST KEY</code></p>
</div>
<div class="paragraph">
<p>Return a new sequence of the same type as <code>SEQUENCE</code>, with the same
elements sorted according to the order determined by the function
<code>TEST</code>.</p>
</div>
<div class="paragraph">
<p><code>TEST</code> is <a href="#lessp">GENERIC-CL:LESSP</a> by default.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Unlike <code>CL:SORT</code> this function is non-destructive.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For the default method to be efficient, efficient <a href="#advance_n"></a>
<a href="#subseq">SUBSEQ</a> and <a href="#length">LENGTH</a> methods should be implemented for the
iterator type of <code>SEQUENCE</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="stable_sort">STABLE-SORT</h3>
<div class="paragraph">
<p>Generic Function: <code>STABLE-SORT SEQUENCE &amp;KEY TEST KEY</code></p>
</div>
<div class="paragraph">
<p>Same as <a href="#sort">SORT</a> however the sort operation is guaranteed to be
stable, that is the relative order of elements of which neither
compares less than the other, is preserved.</p>
</div>
<div class="paragraph">
<p><code>TEST</code> is <a href="#lessp">GENERIC-CL:LESSP</a> by default.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Unlike <code>CL:STABLE-SORT</code> this function is non-destructive.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For the default method to be efficient, efficient <a href="#advance_n"></a>
<a href="#subseq">SUBSEQ</a> and <a href="#length">LENGTH</a> methods should be implemented for the
iterator type of <code>SEQUENCE</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nsort">NSORT</h3>
<div class="paragraph">
<p>Generic Function: <code>NSORT SEQUENCE &amp;KEY TEST KEY</code></p>
</div>
<div class="paragraph">
<p>Same as <a href="#sort">SORT</a> however is permitted to destructively modify
<code>SEQUENCE</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="stable_nsort">STABLE-NSORT</h3>
<div class="paragraph">
<p>Generic Function: <code>STABLE-NSORT SEQUENCE &amp;KEY TEST KEY</code></p>
</div>
<div class="paragraph">
<p>Same as <a href="#stable_sort">STABLE-SORT</a> however is permitted to destructively modify
<code>SEQUENCE</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="concatenate">CONCATENATE</h3>
<div class="paragraph">
<p>Generic Function: <code>CONCATENATE SEQUENCE &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Return a new sequence, of the same type as <code>SEQUENCE</code>, containing all
the elements of <code>SEQUENCE</code> and of each sequence in <code>SEQUENCES</code>, in the
order they are supplied.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Unlike <code>CL:CONCATENATE</code> does not take a result type
argument.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nconcatenate">NCONCATENATE</h3>
<div class="paragraph">
<p>Generic Function: <code>NCONCATENATE RESULT &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Destructively concatenate each sequence in <code>SEQUENCES</code> to the sequence
<code>RESULT</code>.</p>
</div>
<div class="paragraph">
<p>Returns the result of the concatenation.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Whilst this function is permitted to destructively modify
<code>RESULT</code> and <code>SEQUENCES</code>, it is not required and may return a new
sequence instead. Thus do not rely on this function for its side
effects.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="concatenate_to">CONCATENATE-TO</h3>
<div class="paragraph">
<p>Generic Function: <code>CONCATENATE-TO TYPE &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Concatenate each sequence in <code>SEQUENCES</code> into a new sequence of type
<code>TYPE</code>.</p>
</div>
<div class="paragraph">
<p>The new sequence is created by passing <code>TYPE</code> to <a href="#sequence_of_type">SEQUENCE-OF-TYPE</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="map">MAP</h3>
<div class="paragraph">
<p>Generic Function: <code>MAP FUNCTION SEQUENCE &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Create a new sequence, of the same type as <code>SEQUENCE</code> (by
<a href="#cleared">CLEARED</a>), containing the result of applying <code>FUNCTION</code> to each
element of SEQUENCE and each element of each <code>SEQUENCE</code> in
<code>SEQUENCES</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This function is equivalent (in behavior) to the <code>CL:MAP</code>
function except the resulting sequence is always of the same type as
the first sequence passed as an argument, rather than being determined
by a type argument.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nmap">NMAP</h3>
<div class="paragraph">
<p>Generic Function: <code>NMAP RESULT FUNCTION &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Destructively replace each element of <code>RESULT</code> with the result of
applying <code>FUNCTION</code> to each element of <code>RESULT</code> and each element of
each sequence in SEQUENCES.</p>
</div>
<div class="paragraph">
<p>Returns the resulting sequence.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Whilst this function is permitted to modify <code>RESULT</code>, it is
not required to do so and may return the result in a new sequence
instead. Thus do not rely on this function for its side effects.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="map_into">MAP-INTO</h3>
<div class="paragraph">
<p>Generic Function: <code>MAP-INTO RESULT FUNCTION &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Apply <code>FUNCTION</code> on each element of each sequence in <code>SEQUENCES</code> and
accumulate the result in RESULT, using the <a href="#collector">Collector</a> interface.</p>
</div>
<div class="paragraph">
<p>Returns the resulting sequence.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Whilst this function is permitted to modify <code>RESULT</code>, it is
not required and may return the result in a new sequence instead. Thus
do not rely on this function for its side effects.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="map_to">MAP-TO</h3>
<div class="paragraph">
<p>Generic Function: <code>MAP-TO TYPE FUNCTION &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Apply <code>FUNCTION</code> on each element of each sequence in <code>SEQUENCES</code> and
store the result in a new sequence of type <code>TYPE</code> (created using
<a href="#sequence_of_type">SEQUENCE-OF-TYPE</a>).</p>
</div>
<div class="paragraph">
<p>Returns the sequence in which the results of applying the function are
stored.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This function is equivalent in arguments, and almost
equivalent in behavior, to <code>CL:MAP</code>. The only difference is that if
<code>TYPE</code> is a subtype of vector, the vector returned is adjustable with
a fill-pointer. A <code>NIL</code> type argument is not interpreted as do not
accumulate the results, use <a href="#foreach">FOREACH</a> for that.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="map_extend">MAP-EXTEND</h3>
<div class="paragraph">
<p>Generic Function: <code>MAP-EXTEND-TO FUNCTION SEQUENCE &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Apply <code>FUNCTION</code> on each respective element of <code>SEQUENCE</code>, and of each
sequence in <code>SEQUENCES</code>, accumulating, using the <a href="#extend">EXTEND</a> method of
the <a href="#collector">Collector</a> Interface, the elements of the result, which is
expected to be a sequence, in a sequence of the same type as
<code>SEQUENCE</code>.</p>
</div>
<div class="paragraph">
<p>The resulting sequence is returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="map_extend_to">MAP-EXTEND-TO</h3>
<div class="paragraph">
<p>Generic Function: <code>MAP-EXTEND-TO TYPE FUNCTION &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Apply <code>FUNCTION</code> on each respective element of each sequence in
<code>SEQUENCES</code>, and accumulate, using the <a href="#extend">EXTEND</a> method of the
<a href="#collector">Collector</a> Interface, the elements of the result, which is expected
to be a sequence, in a sequence of type <code>TYPE</code>, created using
<a href="#sequence_of_type">SEQUENCE-OF-TYPE</a>.</p>
</div>
<div class="paragraph">
<p>The resulting sequence is returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="map_extend_into">MAP-EXTEND-INTO</h3>
<div class="paragraph">
<p>Generic Function: <code>MAP-EXTEND-INTO RESULT FUNCTION &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Apply <code>FUNCTION</code> on each respective element of each sequence in
<code>SEQUENCES</code>, and accumulate, using the <a href="#extend">EXTEND</a> method of the
<a href="#collector">Collector</a> Interface, the elements of the result, which is expected
to be a sequence, in the sequence <code>RESULT</code>.</p>
</div>
<div class="paragraph">
<p>The resulting sequence is returned.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<code>RESULT</code> may be destructively modified, however that is not
guaranteed thus this function should only be used for its return
value, not its side effects.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="foreach">FOREACH</h3>
<div class="paragraph">
<p>Function: <code>FOREACH &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Apply <code>FUNCTION</code> on each element of each sequence in <code>SEQUENCES</code>.</p>
</div>
<div class="paragraph">
<p>Returns <code>NIL</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="implemented_methods">Implemented Methods</h3>
<div class="paragraph">
<p>This interface&#8217;s system also defines the following methods of the
<a href="#container">Container</a> interface, implemented using the <a href="#iterator">Iterator</a> and
<a href="#collector">Collector</a> interfaces.</p>
</div>
<div class="sect3">
<h4 id="elt_2">ELT</h4>
<div class="paragraph">
<p>Method: <code>ELT (SEQUENCE T) (INDEX T)</code></p>
</div>
<div class="paragraph">
<p>Creates an iterator for <code>SEQUENCE</code>, with start position <code>INDEX</code>,
and returns the first element returned by the iterator.</p>
</div>
</div>
<div class="sect3">
<h4 id="setf_elt">(SETF ELT)</h4>
<div class="paragraph">
<p>Method: <code>(SETF ELT) (VALUE T) (SEQUENCE T) (INDEX T)</code></p>
</div>
<div class="paragraph">
<p>Creates an iterator for <code>SEQUENCE</code>, with start position <code>INDEX</code>, and
sets the value of the element at the starting position of the
iterator.</p>
</div>
</div>
<div class="sect3">
<h4 id="length_2">LENGTH</h4>
<div class="paragraph">
<p>Method: <code>LENGTH (CONTAINER T)</code></p>
</div>
<div class="paragraph">
<p>Returns the size of the container by creating an iterator and calling
the <code>LENGTH</code> method specialized on the <a href="#iterator-struct">ITERATOR</a> structure.</p>
</div>
<div class="paragraph">
<p>This is a linear <code>O(n)</code>, in time, operation unless a more efficient
method, which is specialized on the containers&#8217;s iterator type, is
implemented.</p>
</div>
</div>
<div class="sect3">
<h4 id="emptyp_2">EMPTYP</h4>
<div class="paragraph">
<p>Method: <code>EMPTYP (CONTAINER T)</code></p>
</div>
<div class="paragraph">
<p>Returns true if <a href="#endp">ENDP</a> returns true for a newly created
iterator for <code>CONTAINER</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="adjust_size_2">ADJUST-SIZE</h4>
<div class="paragraph">
<p>Method: <code>ADJUST-SIZE (CONTAINER T) (N T) &amp;KEY ELEMENT</code></p>
</div>
<div class="paragraph">
<p>Requires the <a href="#iterator">Iterator</a> and <a href="#collector">Collector</a> interfaces to be
implemented for the container type.</p>
</div>
</div>
<div class="sect3">
<h4 id="nadjust_size_2">NADJUST-SIZE</h4>
<div class="paragraph">
<p>Method: <code>NADJUST-SIZE (CONTAINER T) (N T) &amp;KEY ELEMENT</code></p>
</div>
<div class="paragraph">
<p>Requires the <a href="#iterator">Iterator</a> and <a href="#collector">Collector</a> interfaces to be
implemented for the container type.</p>
</div>
</div>
<div class="sect3">
<h4 id="subseq_2">SUBSEQ</h4>
<div class="paragraph">
<p>Method: <code>SUBSEQ (SEQUENCE T) (START T) &amp;OPTIONAL END</code></p>
</div>
<div class="paragraph">
<p>Requires the <a href="#cleared">CLEARED</a> method, the <a href="#iterator">Iterator</a> interface and
<a href="#collector">Collector</a> interface to be implemented for the sequence type.</p>
</div>
</div>
<div class="sect3">
<h4 id="setf_subseq_2">(SETF SUBSEQ)</h4>
<div class="paragraph">
<p>Method: <code>(SETF SUBSEQ) (NEW-SEQUENCE T) (SEQUENCE T) (START T) &amp;OPTIONAL END</code></p>
</div>
<div class="paragraph">
<p>Requires the <a href="#iterator">Iterator</a> interface to be implemented for both the
types of <code>SEQUENCE</code> and <code>NEW-SEQUENCE</code>.</p>
</div>
<div class="paragraph">
<p>Requires the <a href="#setf-at">(SETF AT)</a> method to be implemented for the iterator
type of <code>SEQUENCE</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lazy_sequences">Lazy Sequences</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name: <code>GENERIC-CL.LAZY-SEQ</code></p>
</div>
<div class="paragraph">
<p>Lazy sequences are sequences in which the elements are only computed
when they are actually referenced, rather than being computed
immediately.</p>
</div>
<div class="paragraph">
<p>Lazy sequences are implemented with the <code>LAZY-SEQ</code> structure which is
similar to a <code>CONS</code> cell, however the <code>CDR</code>, the <code>TAIL</code> slot of the
<code>LAZY-SEQ</code> structure, stores a function which computes and returns the
remainder of the sequence, rather than storing the sequence directly.</p>
</div>
<div class="sect2">
<h3 id="lazy_seq_structure">LAZY-SEQ Structure</h3>
<div class="paragraph">
<p>Structure: <code>LAZY-SEQ</code></p>
</div>
<div class="paragraph">
<p>Lazy sequence cell analogous to a <code>CONS</code>.</p>
</div>
<div class="dlist">
<div class="title"><strong>Slots</strong></div>
<dl>
<dt class="hdlist1"><code>HEAD</code></dt>
<dd>
<p>The first element of the sequence. <em>Can be accessed with
the <code>LAZY-SEQ-HEAD</code> accessor function.</em></p>
</dd>
<dt class="hdlist1"><code>TAIL</code></dt>
<dd>
<p>A function of zero arguments which returns a <code>LAZY-SEQ</code>
containing the remaining elements in the sequence. If there are no
more elements the function returns <code>NIL</code>. <em>Can be accessed with the
<code>LAZY-SEQ-TAIL</code> accessor function</em>.</p>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title"><strong>Implemented Interfaces:</strong></div>
<ul>
<li>
<p><a href="#equalp"><code>EQUALP</code></a> function.</p>
</li>
<li>
<p><a href="#copy"><code>COPY</code></a> function. Accepts the <code>:DEEP</code> keyword parameter
which indicates whether the elements should also be copied.</p>
</li>
<li>
<p><a href="#coerce"><code>COERCE</code></a> function.</p>
</li>
<li>
<p><a href="#mandatory_functions">Mandatory Functions</a>, of the
<a href="#iterator">Iterator</a> interface.</p>
</li>
<li>
<p><a href="#make_collector"><code>MAKE-COLLECTOR</code></a> function of the
<a href="#collector">Collector</a> interface.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The method specialized on <code>LAZY-SEQ</code>'s returns a collector
for a <code>LIST</code> since it does not make sense to be collecting items,
which have already been evaluated, into a <code>LAZY-SEQ</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p><a href="#subseq">SUBSEQ</a> function which returns the subsequence as a
<code>LAZY-SEQ</code>.</p>
</li>
<li>
<p>Methods, specialized on <code>LAZY-SEQ</code>, are implemented for the
following <a href="#sequence">Sequence Operations</a> and their
destructive counterparts:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>REMOVE</code></p>
</li>
<li>
<p><code>REMOVE-IF</code></p>
</li>
<li>
<p><code>REMOVE-IF-NOT</code></p>
</li>
<li>
<p><code>SUBSTITUTE</code></p>
</li>
<li>
<p><code>SUBSTITUTE-IF</code></p>
</li>
<li>
<p><code>SUBSTITUTE-IF-NOT</code></p>
</li>
<li>
<p><code>REMOVE-DUPLICATES</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These methods return a <code>LAZY-SEQ</code> with the sequence operation
'lazily' applied to the sequence.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The destructive versions are identical to the
non-destructive versions.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="make_lazy_seq">MAKE-LAZY-SEQ</h3>
<div class="paragraph">
<p>Function: <code>MAKE-LAZY-SEQ HEAD TAIL</code></p>
</div>
<div class="paragraph">
<p>Create a <code>LAZY-SEQ</code> with the <code>HEAD</code> slot initialized to <code>HEAD</code> and the
<code>TAIL</code> slot initialized to <code>TAIL</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<code>TAIL</code> must be a function of zero arguments that returns
either a <code>LAZY-SEQ</code> containing the remaining elements in the sequence
or <code>NIL</code> indicating there are no more elements.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For efficiency the function in <code>TAIL</code> should only compute the
remainder of the sequence the first time it is called. Remaining calls
to the function should simply return the previously computed result.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <a href="#lazy_seq_macro"><code>LAZY-SEQ</code></a> macro automatically wraps the
form, which returns the remainder of the sequence, in a function.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="lazy_seq_macro">LAZY-SEQ Macro</h3>
<div class="paragraph">
<p>Macro: <code>LAZY-SEQ HEAD &amp;OPTIONAL TAIL</code></p>
</div>
<div class="paragraph">
<p>Create a <code>LAZY-SEQ</code> instance with the <code>HEAD</code> slot initialized to
<code>HEAD</code> and the <code>TAIL</code> slot initialized to a function which evaluates
the form <code>TAIL</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The function only evaluates <code>TAIL</code> the first time it is
call. Subsequent calls will simply return the previously computed
result.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="coerce_methods">COERCE Methods</h3>
<div class="paragraph">
<p>The following <code>COERCE</code> methods are provided which specialize on
<code>LAZY-SEQ</code>'s.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LAZY-SEQ (EQL 'LIST)</code></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns a list containing all the elements in the <code>LAZY-SEQ</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If the <code>LAZY-SEQ</code> is an infinite sequence, this function
will never terminate.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="concatenate_methods">CONCATENATE Methods</h3>
<div class="paragraph">
<p>Method: <code>CONCATENATE LAZY-SEQ &amp;REST SEQUENCES</code><br>
Method: <code>NCONCATENATE LAZY-SEQ &amp;REST SEQUENCES</code><br>
Method: <code>CONCATENATE-TO (EQL 'LAZY-SEQ) &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Concatenates sequences to a lazy sequence.</p>
</div>
<div class="paragraph">
<p>The concatenation is done lazily, that is the elements of the
sequences, in <code>SEQUENCES</code>, are only added to the lazy sequence when
elements past the end of the <code>LAZY-SEQ</code>, passed in the first argument,
are referenced.</p>
</div>
<div class="paragraph">
<p>The <code>CONCATENATE-TO</code> method returns a lazy sequence containing the
concatenation of <code>SEQUENCES</code>. Like <code>CONCATENATE</code> and <code>NCONCATENATE</code>
the concatenation is done lazily.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>NCONCATENATE</code> is identical to <code>CONCATENATE</code>, that is the
<code>LAZY-SEQ</code> is not destructively modified.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="map_methods">MAP Methods</h3>
<div class="paragraph">
<p>Method: <code>MAP FUNCTION LAZY-SEQ &amp;REST SEQUENCES</code><br>
Method: <code>NMAP FUNCTION LAZY-SEQ &amp;REST SEQUENCES</code><br>
Method: <code>MAP-INTO LAZY-SEQ FUNCTION &amp;REST SEQUENCES</code><br>
Method: <code>MAP-TO (EQL 'LAZY-SEQ) FUNCTION &amp;REST SEQUENCES</code></p>
</div>
<div class="paragraph">
<p>Applies a function on each element of the <code>LAZY-SEQ</code> and of each
sequence in <code>SEQUENCES</code>.</p>
</div>
<div class="paragraph">
<p>The result is a <code>LAZY-SEQ</code> with the function applied lazily to each
element, that is it is only applied when that element is referenced.</p>
</div>
<div class="paragraph">
<p>The <code>MAP-TO</code> method returns the result, of lazily applying the
function on each element of each sequence in <code>SEQUENCES</code>, in a
<code>LAZY-SEQ</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>NMAP</code> and <code>MAP-INTO</code> do not destructively modify the <code>LAZY-SEQ</code>
but return a new sequence instead.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="utilities">Utilities</h3>
<div class="sect3">
<h4 id="range">RANGE</h4>
<div class="paragraph">
<p>Function: <code>RANGE START &amp;OPTIONAL END STEP</code></p>
</div>
<div class="paragraph">
<p>Returns a <code>LAZY-SEQ</code> containing all numbers in the range <code>[START,
END)</code>.</p>
</div>
<div class="paragraph">
<p>If <code>END</code> is <code>NIL</code>, an infinite sequence, without an upper bound, is
returned.</p>
</div>
<div class="paragraph">
<p><code>STEP</code>, defaults to <code>1</code>, is the delta by which each number is incremented
to obtain the next successive number in the sequence.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generic_hash_tables">Generic Hash-Tables</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name: <code>GENERIC-CL.MAP</code></p>
</div>
<div class="paragraph">
<p>This interface provides a hash-table data structure with the generic
function <a href="#hash">HASH</a> as the hash function and the generic function
<a href="#equalp">GENERIC-CL:EQUALP</a> as the key comparison function. This
allows the hash-tables to utilize keys of user-defined types, whereas
the keys of standard hash tables are limited to numbers, characters,
lists and strings.</p>
</div>
<div class="paragraph">
<p>The generic hash-tables are implemented using
<a href="https://github.com/metawilm/cl-custom-hash-table">CL-CUSTOM-HASH-TABLE</a>. If
the Common Lisp implementation supports creating hash-tables with
user-defined hash and comparison functions, standard hash-tables are
used. However if the implementation does not support user-defined hash
and comparison functions, a fallback solution is used, which is a
custom hash-table implementation on top of standard hash-tables. The
<a href="#hash_map">HASH-MAP</a> structure wraps the custom hash-table which allows
methods methods to be specialized on a single type <code>HASH-MAP</code>
regardless of whether standard or custom hash-tables are used.</p>
</div>
<div class="paragraph">
<p>The functions in this interface are specialized on the <code>HASH-MAP</code>
type, thus this type, created with <a href="#make_hash_map">MAKE-HASH-MAP</a>, should be used
rather than built-in hash-tables. If a hash-table is obtained from an
external source, use <a href="#hash_map">HASH-MAP</a> or <a href="#ensure_hash_map">ENSURE-HASH-MAP</a> to convert it
to a <code>HASH-MAP</code>.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<caption class="title">Table 1. <strong>Standard Hash-Table Counterparts</strong></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>CL:HASH-TABLE</code></th>
<th class="tableblock halign-left valign-top"><code>HASH-MAP</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GETHASH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HASH-TABLE-COUNT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LENGTH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">REMHASH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERASE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLRHASH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLEAR</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="hash_map">HASH-MAP</h3>
<div class="paragraph">
<p>Structure: <code>HASH-MAP</code></p>
</div>
<div class="ulist">
<div class="title"><strong>Slots</strong></div>
<ul>
<li>
<p><code>TABLE</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Function: <code>HASH-MAP TABLE</code></p>
</div>
<div class="paragraph">
<p>The <code>HASH-MAP</code> structure wraps a standard <code>HASH-TABLE</code>, or
<code>CUSTOM-HASH-TABLE</code>, contained in the <code>TABLE</code> slot, which can be
accessed accessed with <code>HASH-MAP-TABLE</code>.</p>
</div>
<div class="paragraph">
<p>The <code>HASH-MAP</code> function takes a single argument, a hash-table, and
creates a <code>HASH-MAP</code> wrapping it.</p>
</div>
<div class="sect3">
<h4 id="implemented_interfaces_2">Implemented Interfaces</h4>
<div class="paragraph">
<p>The <a href="#cleared">CLEARED</a>, <a href="#make_sequence_of_type">MAKE-SEQUENCE-OF-TYPE</a>, <a href="#length">LENGTH</a>, <a href="#emptyp">EMPTYP</a>,
<a href="#clear">CLEAR</a>, <a href="#elt">ELT</a>, <a href="#setf-elt">(SETF ELT)</a> and <a href="#erase">ERASE</a> methods of the
<a href="#container">Container</a> interface are implemented.</p>
</div>
<div class="paragraph">
<p>The <a href="#iterator">Iterator</a> interface is implemented for <code>HASH-MAP</code>'s. Each element
returned by the iterator is a <code>CONS</code> with the key in the <code>CAR</code> and the
corresponding value in the <code>CDR</code>. The order in which the entries are
iterated over is unspecified. Likewise it is unspecified which entries
will be iterated over if <code>START</code> is non-zero and/or <code>END</code> is non-NIL,
the only guarantee being that <code>END - START</code> entries are iterated
over. The reverse iterator iterates over the entries in the same order
as the normal iterator due to the order of iteration being
unspecified.</p>
</div>
<div class="paragraph">
<p>The <a href="#setf-at">(SETF AT)</a> method for the <code>HASH-MAP</code> iterator sets the value
corresponding to the key of the current entry, being iterated over, to
the value passed as the argument to <code>SETF</code>.</p>
</div>
<div class="paragraph">
<p>The collector interface is implemented for <code>HASH-MAP</code>'s. The
<a href="#accumulate">ACCUMULATE</a> method expects a <code>CONS</code> where the <code>CAR</code> is the key of
the entry to create and the <code>CDR</code> is the corresponding value.</p>
</div>
<div class="paragraph">
<p>An <a href="#equalp">EQUALP</a> method is implemented for <code>HASH-MAP</code>'s which returns
true if both maps contain the same number of entries and each key in
the first map is present in the second map, with the corresponding
value in the first map equal (by <code>EQUALP</code>) to the corresponding value
in the second
map.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If the two maps have different test functions, the <code>EQUALP</code>
method is not necessarily symmetric i.e. <code>(EQUALP A B)</code> does not imply
<code>(EQUALP B A)</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A <a href="#likep">LIKEP</a> method is implemented for <code>HASH-MAP</code>'s, which is similar
to the <code>EQUALP</code> method, however the values are compared using <code>LIKEP</code>.</p>
</div>
<div class="paragraph">
<p>A <a href="#copy">COPY</a> method is implemented for <code>HASH-MAP</code>'s which by default
creates a new map with the same entries as the original map. If <code>:DEEP
T</code> is provided the values (but not the keys as they should be
immutable) are copied by <code>(COPY VALUE :DEEP T)</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="make_hash_map">MAKE-HASH-MAP</h3>
<div class="paragraph">
<p>Function: <code>MAKE-HASH-MAP &amp;KEY TEST &amp;ALLOW-OTHER-KEYS</code></p>
</div>
<div class="paragraph">
<p>Create a <code>HASH-MAP</code> wrapping a hash table with test function <code>TEST</code>,
which defaults to <code>#'GENERIC-CL:EQUALP</code>.</p>
</div>
<div class="paragraph">
<p><code>TEST</code> may be one of the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>GENERIC-CL:EQUALP</code></dt>
<dd>
<p>A hash table with hash function <a href="#hash">HASH</a> and
comparison function <a href="#equalp">GENERIC-CL:EQUALP</a> is created.</p>
</dd>
<dt class="hdlist1"><code>LIKEP</code></dt>
<dd>
<p>A hash table with hash function <a href="#like_hash">LIKE-HASH</a> and comparison
function <a href="#likep">LIKEP</a> is created.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>TEST</code> may also be a standard hash-table test specifier, in which case
a native hash table is created, wrapped in a <code>HASH-MAP</code>.</p>
</div>
<div class="paragraph">
<p>The function accepts all additional arguments (including
implementation specific arguments) accepted by <code>CL:MAKE-HASH-TABLE</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ensure_hash_map">ENSURE-HASH-MAP</h3>
<div class="paragraph">
<p>Function: <code>ENSURE-HASH-MAP THING</code></p>
</div>
<div class="paragraph">
<p>If <code>MAP</code> is a <a href="#hash_map">HASH-MAP</a> returns it, otherwise if <code>MAP</code> is a
<code>HASH-TABLE</code> or <code>CUSTOM-HASH-TABLE</code> returns a <code>HASH-MAP</code> which wraps
it.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Signals an error if <code>MAP</code> is not of the aforementioned types.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hash_map_test">HASH-MAP-TEST</h3>
<div class="paragraph">
<p>Function: <code>HASH-MAP-TEST MAP</code></p>
</div>
<div class="paragraph">
<p>Returns the test function, as a symbol, of the underlying hash table.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
On some implementations the return value is not
<code>GENERIC-CL:EQUALP</code>, even if the hash table has <code>HASH</code> and
<code>GENERIC-CL:EQUALP</code> as its hash and comparison functions.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hash">HASH</h3>
<div class="paragraph">
<p>Generic Function: <code>HASH OBJECT</code></p>
</div>
<div class="paragraph">
<p>Hash function for hash tables with the <code>GENERIC-CL:EQUALP</code> test
specifier.</p>
</div>
<div class="paragraph">
<p>Return a hash code for <code>OBJECT</code>, which should be a non-negative
fixnum.</p>
</div>
<div class="paragraph">
<p>If two objects are equal (under <a href="#equalp">GENERIC-CL:EQUALP</a>) then
the hash codes, for the two objects, returned by <code>HASH</code>, should also
be equal.</p>
</div>
<div class="paragraph">
<p>The default method calls <code>CL:SXHASH</code> which satisfies the constraint
that <code>(CL:EQUAL X Y)</code> implies <code>(= (CL:SXHASH X) (CL:SXHASH
Y))</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Currently no specialized method is provided for
container/sequence objects such as lists. The default method does not
violate the constraint for lists (but does violate the constraints for
non-string vectors) as keys, provided they only contain numbers,
characters, symbols, strings and other lists as elements.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="like_hash">LIKE-HASH</h3>
<div class="paragraph">
<p>Generic Function: <code>LIKE-HASH OBJECT</code></p>
</div>
<div class="paragraph">
<p>Hash function for hash tables with the <code>LIKEP</code> test
specifier.</p>
</div>
<div class="paragraph">
<p>Return a hash code for <code>OBJECT</code>, which should be a non-negative
fixnum.</p>
</div>
<div class="paragraph">
<p>If two objects are equal (under <a href="#likep">LIKEP</a>) then the hash codes, for
the two objects, returned by <code>LIKE-HASH</code>, should also be equal.</p>
</div>
<div class="paragraph">
<p>Methods which satisfy these constraints are provided for strings,
characters, lists, vectors and multi-dimensional arrays. The default
method calls the <code>HASH</code> function.</p>
</div>
</div>
<div class="sect2">
<h3 id="get">GET</h3>
<div class="paragraph">
<p>Generic Function: <code>GET KEY MAP &amp;OPTIONAL DEFAULT</code></p>
</div>
<div class="paragraph">
<p>Return the value of the entry corresponding to the key <code>KEY</code> in the
map <code>MAP</code>.</p>
</div>
<div class="paragraph">
<p>If the <code>MAP</code> does not contain any entry with that key, <code>DEFAULT</code> is
returned. The second return value is true if an entry with key <code>KEY</code>
was found in the map, false otherwise.</p>
</div>
<div class="paragraph">
<p>Methods are provided for <code>HASH-MAP</code>'s, standard <code>HASH-TABLE</code>'s,
association lists (<code>ALISTS</code>) and property lists (<code>PLISTS</code>). For
<code>ALISTS</code> the <a href="#equalp">EQUALP</a> key comparison function is used. For <code>PLISTS</code>
the <code>EQ</code> key comparison function is used.</p>
</div>
</div>
<div class="sect2">
<h3 id="setf_get">(SETF GET)</h3>
<div class="paragraph">
<p>Generic Function: <code>(SETF GET) VALUE KEY MAP &amp;OPTIONAL DEFAULT</code></p>
</div>
<div class="paragraph">
<p>Set the value of the entry corresponding to the key <code>KEY</code> in the map
<code>MAP</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>DEFAULT</code> is ignored.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Only a method for <code>HASH-MAPS</code> and <code>HASH-TABLES</code> is
provided.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ensure_get">ENSURE-GET</h3>
<div class="paragraph">
<p>Macro: <code>ENSURE-GET KEY MAP &amp;OPTIONAL DEFAULT</code></p>
</div>
<div class="paragraph">
<p>Like <code>GET</code> however if <code>KEY</code> is not found in <code>MAP</code> it is added, by
<code>(SETF GET)</code> with the value <code>DEFAULT</code>.</p>
</div>
<div class="paragraph">
<p>The first return value is the value corresponding to the key <code>KEY</code>, or
<code>DEFAULT</code> if <code>KEY</code> is not found in <code>MAP</code>. The second return value is
true if <code>KEY</code> was found in <code>MAP</code>, false otherwise.</p>
</div>
</div>
<div class="sect2">
<h3 id="elt_methods">ELT Methods</h3>
<div class="paragraph">
<p>The following <code>ELT</code> methods are provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>(MAP HASH-MAP) (KEY T)</code></p>
<div class="paragraph">
<p>Returns <code>(GENERIC-CL:GET KEY MAP)</code>.</p>
</div>
</li>
<li>
<p><code>(MAP HASH-TABLE) (KEY T)</code></p>
<div class="paragraph">
<p>Returns <code>(GETHASH KEY MAP)</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="setf_elt_methods">(SETF ELT) Methods</h3>
<div class="paragraph">
<p>The following <code>(SETF ELT)</code> methods are provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>(VALUE T) (MAP HASH-MAP) (KEY T)</code></p>
<div class="paragraph">
<p>Calls <code>(SETF (GENERIC-CL:GET KEY MAP) VALUE)</code></p>
</div>
</li>
<li>
<p><code>(VALUE T) (MAP HASH-TABLE) (KEY T)</code></p>
<div class="paragraph">
<p>Calls <code>(SETF (GETHASH KEY MAP) VALUE)</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="erase_method">ERASE Method</h3>
<div class="paragraph">
<p>Method: <code>ERASE (MAP HASH-MAP) (KEY T)</code></p>
</div>
<div class="paragraph">
<p>Remove the entry with key <code>KEY</code> from <code>MAP</code>.</p>
</div>
<div class="paragraph">
<p>Returns true if the map contained an entry with key <code>KEY</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="hash_map_alist">HASH-MAP-ALIST</h3>
<div class="paragraph">
<p>Function: <code>HASH-MAP-ALIST MAP</code></p>
</div>
<div class="paragraph">
<p>Return an association list (<code>ALIST</code>) containing all the entries in the
map <code>MAP</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="alist_hash_map">ALIST-HASH-MAP</h3>
<div class="paragraph">
<p>Function: <code>ALIST-HASH-MAP ALIST &amp;REST ARGS</code></p>
</div>
<div class="paragraph">
<p>Return a <a href="#hash_map">HASH-MAP</a> containing all entries in the association list
<code>ALIST</code>.</p>
</div>
<div class="paragraph">
<p><code>ARGS</code> are the additional arguments passed to <a href="#make_hash_map">MAKE-HASH-MAP</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="map_keys">MAP-KEYS</h3>
<div class="paragraph">
<p>Generic Function: <code>MAP-KEYS MAP</code></p>
</div>
<div class="paragraph">
<p>Return a sequence containing all the keys in the map <code>MAP</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Specialized only on <code>HASH-MAP</code>'s and <code>CL:HASH-TABLE</code>'s.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="map_values">MAP-VALUES</h3>
<div class="paragraph">
<p>Generic Function: <code>MAP-VALUES MAP</code></p>
</div>
<div class="paragraph">
<p>Return a sequence containing all the values in the map <code>MAP</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Specialized only on <code>HASH-MAP</code>'s and <code>CL:HASH-TABLE</code>'s.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="coerce_methods_2">COERCE Methods</h3>
<div class="paragraph">
<p>The following <code>COERCE</code> methods are provided for <code>HASH-MAPS</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>HASH-MAP (EQL 'ALIST)</code></p>
<div class="paragraph">
<p>Returns an association list (<code>ALIST</code>) containing all the entries in
the map. Equivalent to <a href="#hash_map_alist">HASH-MAP-ALIST</a>.</p>
</div>
</li>
<li>
<p><code>HASH-MAP (EQL 'PLIST)</code></p>
<div class="paragraph">
<p>Returns a property list (<code>PLIST</code>) containing all the entries in
the map.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="make_sequence_of_type_method">MAKE-SEQUENCE-OF-TYPE Method</h3>
<div class="paragraph">
<p>Method: <code>MAKE-SEQUENCE-OF-TYPE (TYPE (EQL 'HASH-MAP)) (ARGS NULL)</code></p>
</div>
<div class="paragraph">
<p>Return a new empty <code>HASH-MAP</code> with test function <code>GENERIC-CL:EQUALP</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sets">Sets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name <code>GENERIC-CL.SET</code>.</p>
</div>
<div class="paragraph">
<p>The set interface provides generic functions for performing set
operations and implementations of those operations for a hash-set data
structure.</p>
</div>
<div class="paragraph">
<p>Generic function wrappers are provided over the following Common Lisp
set operation functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SUBSETP</code></p>
</li>
<li>
<p><code>ADJOIN</code></p>
</li>
<li>
<p><code>INTERSECTION</code></p>
</li>
<li>
<p><code>NINTERSECTION</code></p>
</li>
<li>
<p><code>SET-DIFFERENCE</code></p>
</li>
<li>
<p><code>NSET-DIFFERENCE</code></p>
</li>
<li>
<p><code>SET-EXCLUSIVE-OR</code></p>
</li>
<li>
<p><code>NSET-EXCLUSIVE-OR</code></p>
</li>
<li>
<p><code>UNION</code></p>
</li>
<li>
<p><code>NUNION</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each function, methods specializing on <code>LISTS</code>, which simply call
the corresponding function in the <code>CL</code> package, and <a href="#hash_map">HASH-MAP</a>'s are
implemented. Each function accepts all keyword arguments accepted by
the corresponding <code>CL</code> functions however they are ignored by the
<code>HASH-MAP</code> methods.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="#hash_map">HASH-MAP</a>'s may be used as sets, in which case the set
elements are stored in the keys. The values of the map&#8217;s entries are
ignored by the set operations, thus the map values of the sets
returned, by the set operation functions, are unspecified.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="adjoin">ADJOIN</h3>
<div class="paragraph">
<p>Generic Function: <code>ADJOIN ITEM SET &amp;KEY &amp;ALLOW-OTHER-KEYS</code></p>
</div>
<div class="paragraph">
<p>Return a new set containing the elements of <code>SET</code>, and of the same
type, with <code>ITEM</code> added to it.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This function is non-destructive. A new set is always returned even if
<code>SET</code> is a <a href="#hash_map">HASH-MAP</a> / <a href="#hash_set">HASH-SET</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Accepts all keyword arguments accepted by <code>CL:ADJOIN</code> however
they are ignored by the <a href="#hash_map">HASH-MAP</a> method.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nadjoin">NADJOIN</h3>
<div class="paragraph">
<p>Generic Function: <code>ADJOIN ITEM SET &amp;KEY &amp;ALLOW-OTHER-KEYS</code></p>
</div>
<div class="paragraph">
<p>Same as <a href="#adjoin">ADJOIN</a> however is permitted to destructively modify <code>SET</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The set returned is <code>EQ</code> to <code>SET</code> in the case of <code>SET</code>
being a <a href="#hash_map">HASH-MAP</a> however this is not a requirement in the general
case, and is not <code>EQ</code> if <code>SET</code> is a list. Thus this function should
not be relied upon for its side effects.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Implemented for both lists and  <a href="#hash_map">HASH-MAP</a>'s.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="memberp">MEMBERP</h3>
<div class="paragraph">
<p>Generic Function: <code>MEMBERP ITEM SET &amp;KEY &amp;ALLOW-OTHER-KEYS</code></p>
</div>
<div class="paragraph">
<p>Return true if <code>ITEM</code> is an element of the set <code>SET</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Implemented for both lists and <a href="#hash_map">HASH-MAP</a>'s. All keyword arguments
accepted by <code>CL:MEMBER</code> are accepted, however are ignored by the
<code>HASH-MAP</code> method.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hash_set">HASH-SET</h3>
<div class="paragraph">
<p>Structure: <code>HASH-SET</code></p>
</div>
<div class="paragraph">
<p>A <code>HASH-SET</code> is a <a href="#hash_map">HASH-MAP</a> however it is used to indicate that
only the keys are important. This allows the <a href="#equalp">EQUALP</a> and <a href="#copy">COPY</a>
methods, specialized on `HASH-SET&#8217;s to be implemented more
efficiently, than the methods specialized on <code>HASH-MAP</code>'s, as the
map values are not compared/copied.</p>
</div>
<div class="paragraph">
<p>The implementation of the <a href="#iterator">Iterator</a> interface for <code>HASH-SETS</code> differs
from the implementation for <code>HASH-MAPS</code> in that only the set elements,
i.e. the keys of the underlying hash table, are returned rather than
the key-value pairs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The set operations are implemented both for <code>HASH-MAP</code>'s and
<code>HASH-SET</code>'s.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hash_table_set">HASH-TABLE-SET</h3>
<div class="paragraph">
<p>Function: <code>HASH-TABLE-SET TABLE</code></p>
</div>
<div class="paragraph">
<p>Return a <code>HASH-SET</code> structure wrapping the standard <code>HASH-TABLE</code> or
<code>CUSTOM-HASH-TABLE</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="hash_set_2">HASH-SET</h3>
<div class="paragraph">
<p>Function: <code>HASH-SET &amp;REST ELEMENTS</code></p>
</div>
<div class="paragraph">
<p>Return a <a href="#hash_set">HASH-SET</a> with elements <code>ELEMENTS</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="make_hash_set">MAKE-HASH-SET</h3>
<div class="paragraph">
<p>Function: <code>MAKE-HASH-SET &amp;KEY &amp;ALLOW-OTHER-KEYS</code></p>
</div>
<div class="paragraph">
<p>Return a new empty <a href="#hash_set">HASH-SET</a>.</p>
</div>
<div class="paragraph">
<p>Accepts the same keyword arguments as <a href="#make_hash_map">MAKE-HASH-MAP</a>. The default
<code>TEST</code> function is <a href="#equalp">GENERIC-CL:EQUALP</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="coerce_methods_3">COERCE Methods</h3>
<div class="paragraph">
<p>The following <code>COERCE</code> Methods are provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LIST (EQL 'HASH-SET)</code></p>
<div class="paragraph">
<p>Return a <code>HASH-SET</code> containing the elements in the list.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="math">Math</h2>
<div class="sectionbody">
<div class="paragraph">
<p>System and package name <code>GENERIC-CL.MATH</code>.</p>
</div>
<div class="paragraph">
<p>This interface provides generic function wrappers over a number of
math functions. Methods specialized on <code>NUMBER</code> are provided, which
simply call the corresponding functions in the <code>CL</code> package. The
purpose of this interface is to allow the mathematical functions to be
extended to vectors and matrices.</p>
</div>
<div class="paragraph">
<p>This interface is not exported by the <code>GENERIC-CL</code> package, as it&#8217;s
not as frequently used as the previous interfaces. The
<code>GENERIC-MATH-CL</code> package exports all symbols exports by the
<code>GENERIC-CL</code> package and the shadowed math functions in
<code>GENERIC-CL.MATH</code>.</p>
</div>
<div class="paragraph">
<p>Generic function wrappers are provided for the following functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SIN</code></p>
</li>
<li>
<p><code>COS</code></p>
</li>
<li>
<p><code>TAN</code></p>
</li>
<li>
<p><code>ASIN</code></p>
</li>
<li>
<p><code>ACOS</code></p>
</li>
<li>
<p><code>ATAN</code></p>
</li>
<li>
<p><code>SINH</code></p>
</li>
<li>
<p><code>COSH</code></p>
</li>
<li>
<p><code>TANH</code></p>
</li>
<li>
<p><code>ASINH</code></p>
</li>
<li>
<p><code>ACOSH</code></p>
</li>
<li>
<p><code>ATANH</code></p>
</li>
<li>
<p><code>EXP</code></p>
</li>
<li>
<p><code>EXPT</code></p>
</li>
<li>
<p><code>LOG</code></p>
</li>
<li>
<p><code>SQRT</code></p>
</li>
<li>
<p><code>ISQRT</code></p>
</li>
<li>
<p><code>REALPART</code></p>
</li>
<li>
<p><code>IMAGPART</code></p>
</li>
<li>
<p><code>CIS</code></p>
</li>
<li>
<p><code>CONJUGATE</code></p>
</li>
<li>
<p><code>PHASE</code></p>
</li>
<li>
<p><code>NUMERATOR</code></p>
</li>
<li>
<p><code>DENOMINATOR</code></p>
</li>
<li>
<p><code>RATIONAL</code></p>
</li>
<li>
<p><code>RATIONALIZE</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="system_generic_cl_util">System GENERIC-CL.UTIL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The system <code>GENERIC-CL.UTIL</code> provides additional utilities implemented
on top of <code>GENERIC-CL</code>. These utilities are contained in the package
<code>GENERIC-CL.UTIL</code>.</p>
</div>
<div class="sect2">
<h3 id="lazy_sequence_utilities">Lazy Sequence Utilities</h3>
<div class="sect3">
<h4 id="repeat">REPEAT</h4>
<div class="paragraph">
<p>Function: <code>REPEAT X &amp;OPTIONAL N TYPE</code></p>
</div>
<div class="paragraph">
<p>Create a lazy sequence containing <code>N</code> elements with the value <code>X</code>.</p>
</div>
<div class="paragraph">
<p>If <code>N</code> is <code>NIL</code> or is not provided, an infinite sequence is returned.</p>
</div>
<div class="paragraph">
<p>If <code>TYPE</code> is non-<code>NIL</code> a sequence of type <code>TYPE</code> is returned. The
sequence is created using the <a href="#sequence_of_type">SEQUENCE-OF-TYPE</a> function, and the
elements are accumulated into the sequence using the <a href="#collector">Collector</a>
interface.</p>
</div>
</div>
<div class="sect3">
<h4 id="repeatedly">REPEATEDLY</h4>
<div class="paragraph">
<p>Function: <code>REPEATEDLY F &amp;OPTIONAL N TYPE</code></p>
</div>
<div class="paragraph">
<p>Create a lazy sequence containing <code>N</code> elements, with each element
being the result of an application of the function <code>F</code> with no
arguments.</p>
</div>
<div class="paragraph">
<p>If <code>N</code> is <code>NIL</code> or not provided, an infinite sequence is returned.</p>
</div>
<div class="paragraph">
<p>If <code>TYPE</code> is non-<code>NIL</code> a sequence of type <code>TYPE</code> is returned. The
sequence is created using the <a href="#sequence_of_type">SEQUENCE-OF-TYPE</a> function, and the
elements are accumulated into the sequence using the <a href="#collector">Collector</a>
interface.</p>
</div>
</div>
<div class="sect3">
<h4 id="iterate">ITERATE</h4>
<div class="paragraph">
<p>Function: <code>ITERATE F X &amp;KEY INITIAL</code></p>
</div>
<div class="paragraph">
<p>Return an infinite lazy sequence where each element is the result of
applying the function <code>F</code> on the previous element.</p>
</div>
<div class="paragraph">
<p>IF the keyword argument <code>INITIAL</code> is true, the first element of the
sequence is <code>X</code>, otherwise the first element is the result of applying
<code>F</code> on <code>X</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="fiterate">FITERATE</h4>
<div class="paragraph">
<p>Function: <code>FITERATE F X &amp;KEY INIITIAL</code></p>
</div>
<div class="paragraph">
<p>Deprecated alias for <code>ITERATE</code></p>
</div>
</div>
<div class="sect3">
<h4 id="cycle">CYCLE</h4>
<div class="paragraph">
<p>Function: <code>CYCLE SEQUENCE</code></p>
</div>
<div class="paragraph">
<p>Return a lazy sequence containing an infinite repetition of the
elements in <code>SEQUENCE</code>.</p>
</div>
<div class="paragraph">
<p>The resulting sequence contains the elements of <code>SEQUENCE</code> in order,
with the last element of <code>SEQUENCE</code> followed by the first, and
remaining, elements.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gf-optimization">Optimization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is an overhead associated with generic functions. Code making
use of the generic function interface will be slower than code which
calls the <code>CL</code> functions directly, due to the cost of dynamic method
dispatch. For most cases this will not result in a noticeable decrease
in performance, however for those cases where it does there is an
optimization.</p>
</div>
<div class="paragraph">
<p>This library is built on top of
<a href="https://github.com/alex-gutev/static-dispatch">STATIC-DISPATCH</a>, which
is a library that allows generic-function dispatch to be performed
statically, at compile-time, rather than dynamically, at runtime. The
library allows a call to a generic function to be replaced with the
body of the appropriate method, or a call to an ordinary function
implementing the method, which is selected based on the type
declarations of its arguments.</p>
</div>
<div class="paragraph">
<p>For a generic function call to be inlined an <code>OPTIMIZE</code> declaration
with a <code>SPEED</code> level of <code>3</code> and with <code>SAFETY</code> and <code>DEBUG</code> levels less
than <code>3</code> has to be in place, in the environment of the
call. Additionally, it must also be possible to determine the types of
the arguments at compile-time. This means in general that the types of
variables and the return types of functions have to be declared. <em>See
<a href="https://github.com/alex-gutev/static-dispatch">STATIC-DISPATCH</a> and
<a href="https://github.com/alex-gutev/cl-form-types">CL-FORM-TYPES</a> for
information on how the types of the arguments are determined and how
to make the type information available</em>.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-k">let</span> <span class="tok-p">((</span><span class="tok-nv">x</span> <span class="tok-mi">1</span><span class="tok-p">))</span>
  <span class="tok-p">(</span><span class="tok-k">declare</span> <span class="tok-p">(</span><span class="tok-k">optimize</span> <span class="tok-p">(</span><span class="tok-nv">speed</span> <span class="tok-mi">3</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nv">safety</span> <span class="tok-mi">2</span><span class="tok-p">))</span>
           <span class="tok-p">(</span><span class="tok-k">type</span> <span class="tok-nc">number</span> <span class="tok-nv">x</span><span class="tok-p">))</span>

  <span class="tok-p">(</span><span class="tok-nb">equalp</span> <span class="tok-nv">x</span> <span class="tok-p">(</span><span class="tok-k">the</span> <span class="tok-nc">number</span> <span class="tok-p">(</span><span class="tok-nb">+</span> <span class="tok-mi">3</span> <span class="tok-mi">4</span><span class="tok-p">))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will result in the call to the <code>EQUALP</code> function being replaced
with the body of the <code>NUMBER NUMBER</code> method.</p>
</div>
<div class="paragraph">
<p>The n-argument equality, comparison and arithmetic functions also have
associated compiler-macros which replace the calls to the n-argument
functions with multiple inline calls to the binary functions, e.g. <code>(=
1 2 3)</code> is replaced with <code>(and (equalp 1 2) (equalp 1 3))</code>.</p>
</div>
<div class="paragraph">
<p>Thus the following should also result in the <code>EQUALP</code> function calls
being statically dispatched:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lisp"><span></span><span class="tok-p">(</span><span class="tok-k">let</span> <span class="tok-p">((</span><span class="tok-nv">x</span> <span class="tok-mi">1</span><span class="tok-p">))</span>
  <span class="tok-p">(</span><span class="tok-k">declare</span> <span class="tok-p">(</span><span class="tok-k">optimize</span> <span class="tok-p">(</span><span class="tok-nv">speed</span> <span class="tok-mi">3</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nv">safety</span> <span class="tok-mi">2</span><span class="tok-p">))</span>
           <span class="tok-p">(</span><span class="tok-k">type</span> <span class="tok-nc">number</span> <span class="tok-nv">x</span><span class="tok-p">))</span>

  <span class="tok-p">(</span><span class="tok-nb">=</span> <span class="tok-nv">x</span> <span class="tok-p">(</span><span class="tok-k">the</span> <span class="tok-nc">number</span> <span class="tok-p">(</span><span class="tok-nb">+</span> <span class="tok-mi">3</span> <span class="tok-mi">4</span><span class="tok-p">))))</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
STATIC-DISPATCH requires the ability to extract <code>TYPE</code> and
 <code>INLINE</code> declarations from implementation specific environment
 objects. This is provided by the
 <a href="https://alex-gutev.github.io/cl-environments/">CL-ENVIRONMENTS</a>
 library, which works in the general case however some
 <a href="https://alex-gutev.github.io/cl-environments/#ensuring_code_walking">workarounds</a>
 are necessary in order for it to work on all implementations in all
 cases.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-07-03 15:50:16 +0200
</div>
</div>
<style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #408080; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #FF0000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
pre.pygments .tok-go { color: #888888 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #7D9029 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #A0A000 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</body>
</html>